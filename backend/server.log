Ignoring invalid configuration option passed to Connection: prepare. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
Ignoring invalid configuration option passed to Connection: timeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
üîå WebSocket service initialized
üöÄ Fix Zone Backend Server is running on port 3001
üìä API Base URL: http://localhost:3001/api
üè• Health Check: http://localhost:3001/health
üîå WebSocket URL: ws://localhost:3001/ws
‚úÖ Database connected successfully
üîó Client connected: client_1763581698897_mr4y0oc0u (Total: 1)
getAllInvoices called with repairRequestId: undefined
Query executed: 
        SELECT 
          i.id,
          i.totalAmount,
          i.amountPaid,
          i.status,
          i.currency,
          i.taxAmount,
          i.repairRequestId,
          i.createdAt,
          c.name as customerName,
          c.phone as customerPhone,
          c.email as customerEmail,
          rr.deviceBrand,
          rr.deviceModel
        FROM Invoice i
        LEFT JOIN RepairRequest rr ON i.repairRequestId = rr.id
        LEFT JOIN Customer c ON rr.customerId = c.id
        WHERE i.deletedAt IS NULL
        ORDER BY i.createdAt DESC
        LIMIT 50
      
Query params: []
Found invoices: [
  {
    id: 15,
    totalAmount: '3000.00',
    amountPaid: null,
    status: 'draft',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-11-14T07:50:33.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 14,
    totalAmount: '2340.00',
    amountPaid: '340.00',
    status: 'paid',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: 75,
    createdAt: 2025-10-27T16:23:18.000Z,
    customerName: 'Mahmoud Nasser',
    customerPhone: '01111111111',
    customerEmail: 'admin@laapak.com',
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 13,
    totalAmount: '300.00',
    amountPaid: '0.00',
    status: 'draft',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-10-27T16:21:20.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 12,
    totalAmount: '2340.00',
    amountPaid: '100.00',
    status: 'partially_paid',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: 74,
    createdAt: 2025-10-27T14:58:47.000Z,
    customerName: 'saif',
    customerPhone: '01000000000',
    customerEmail: 'admin@laapak.com',
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 11,
    totalAmount: '300.00',
    amountPaid: '300.00',
    status: 'paid',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-10-27T14:07:54.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 10,
    totalAmount: '2000.00',
    amountPaid: '2000.00',
    status: 'paid',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-10-26T22:59:51.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 9,
    totalAmount: '670.00',
    amountPaid: '0.00',
    status: 'draft',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-10-26T22:55:37.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 8,
    totalAmount: '600.00',
    amountPaid: '0.00',
    status: 'draft',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-10-26T22:40:59.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 7,
    totalAmount: '600.00',
    amountPaid: '200.00',
    status: 'partially_paid',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-10-26T22:40:50.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  }
]
getAllInvoices called with repairRequestId: undefined
Query executed: 
        SELECT 
          i.id,
          i.totalAmount,
          i.amountPaid,
          i.status,
          i.currency,
          i.taxAmount,
          i.repairRequestId,
          i.createdAt,
          c.name as customerName,
          c.phone as customerPhone,
          c.email as customerEmail,
          rr.deviceBrand,
          rr.deviceModel
        FROM Invoice i
        LEFT JOIN RepairRequest rr ON i.repairRequestId = rr.id
        LEFT JOIN Customer c ON rr.customerId = c.id
        WHERE i.deletedAt IS NULL
        ORDER BY i.createdAt DESC
        LIMIT 50
      
Query params: []
Found invoices: [
  {
    id: 15,
    totalAmount: '3000.00',
    amountPaid: null,
    status: 'draft',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-11-14T07:50:33.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 14,
    totalAmount: '2340.00',
    amountPaid: '340.00',
    status: 'paid',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: 75,
    createdAt: 2025-10-27T16:23:18.000Z,
    customerName: 'Mahmoud Nasser',
    customerPhone: '01111111111',
    customerEmail: 'admin@laapak.com',
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 13,
    totalAmount: '300.00',
    amountPaid: '0.00',
    status: 'draft',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-10-27T16:21:20.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 12,
    totalAmount: '2340.00',
    amountPaid: '100.00',
    status: 'partially_paid',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: 74,
    createdAt: 2025-10-27T14:58:47.000Z,
    customerName: 'saif',
    customerPhone: '01000000000',
    customerEmail: 'admin@laapak.com',
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 11,
    totalAmount: '300.00',
    amountPaid: '300.00',
    status: 'paid',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-10-27T14:07:54.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 10,
    totalAmount: '2000.00',
    amountPaid: '2000.00',
    status: 'paid',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-10-26T22:59:51.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 9,
    totalAmount: '670.00',
    amountPaid: '0.00',
    status: 'draft',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-10-26T22:55:37.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 8,
    totalAmount: '600.00',
    amountPaid: '0.00',
    status: 'draft',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-10-26T22:40:59.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 7,
    totalAmount: '600.00',
    amountPaid: '200.00',
    status: 'partially_paid',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-10-26T22:40:50.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  }
]
Error deleting payment with ID 20: Error: This command is not supported in the prepared statement protocol yet
    at PromisePool.execute (/opt/lampp/htdocs/FixZone/backend/node_modules/mysql2/lib/promise/pool.js:54:22)
    at /opt/lampp/htdocs/FixZone/backend/routes/payments.js:658:14
    at Layer.handle [as handle_request] (/opt/lampp/htdocs/FixZone/backend/node_modules/express/lib/router/layer.js:95:5)
    at next (/opt/lampp/htdocs/FixZone/backend/node_modules/express/lib/router/route.js:149:13)
    at /opt/lampp/htdocs/FixZone/backend/middleware/validation.js:33:5
    at Layer.handle [as handle_request] (/opt/lampp/htdocs/FixZone/backend/node_modules/express/lib/router/layer.js:95:5)
    at next (/opt/lampp/htdocs/FixZone/backend/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/opt/lampp/htdocs/FixZone/backend/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/opt/lampp/htdocs/FixZone/backend/node_modules/express/lib/router/layer.js:95:5)
    at /opt/lampp/htdocs/FixZone/backend/node_modules/express/lib/router/index.js:284:15 {
  code: 'ER_UNSUPPORTED_PS',
  errno: 1295,
  sql: 'START TRANSACTION',
  sqlState: 'HY000',
  sqlMessage: 'This command is not supported in the prepared statement protocol yet'
}
üîå Client disconnected: client_1763581698897_mr4y0oc0u (Total: 0)
üîó Client connected: client_1763582444046_eyjc97dn5 (Total: 1)
üîå Client disconnected: client_1763582444046_eyjc97dn5 (Total: 0)
üîó Client connected: client_1763583344607_pe1y74xqe (Total: 1)
üîå Client disconnected: client_1763583344607_pe1y74xqe (Total: 0)
üîó Client connected: client_1763583528047_ifkg89qhi (Total: 1)
üîó Client connected: client_1763583537287_2fpf8dwtg (Total: 2)
üîå Client disconnected: client_1763583528047_ifkg89qhi (Total: 1)
üîå Client disconnected: client_1763583537287_2fpf8dwtg (Total: 0)
üîó Client connected: client_1763583559179_xl01j15nr (Total: 1)
üîå Client disconnected: client_1763583559179_xl01j15nr (Total: 0)
üîó Client connected: client_1763583582506_jrcf2zjzq (Total: 1)
üîó Client connected: client_1763583591901_m749hrwe3 (Total: 2)
üîå Client disconnected: client_1763583582506_jrcf2zjzq (Total: 1)
üîå Client disconnected: client_1763583591901_m749hrwe3 (Total: 0)
üîó Client connected: client_1763583774084_rconpgw7o (Total: 1)
getAllInvoices called with repairRequestId: undefined
Query executed: 
        SELECT 
          i.id,
          i.totalAmount,
          i.amountPaid,
          i.status,
          i.currency,
          i.taxAmount,
          i.repairRequestId,
          i.createdAt,
          c.name as customerName,
          c.phone as customerPhone,
          c.email as customerEmail,
          rr.deviceBrand,
          rr.deviceModel
        FROM Invoice i
        LEFT JOIN RepairRequest rr ON i.repairRequestId = rr.id
        LEFT JOIN Customer c ON rr.customerId = c.id
        WHERE i.deletedAt IS NULL
        ORDER BY i.createdAt DESC
        LIMIT 50
      
Query params: []
Found invoices: [
  {
    id: 15,
    totalAmount: '3000.00',
    amountPaid: null,
    status: 'draft',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-11-14T07:50:33.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 14,
    totalAmount: '2340.00',
    amountPaid: '340.00',
    status: 'paid',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: 75,
    createdAt: 2025-10-27T16:23:18.000Z,
    customerName: 'Mahmoud Nasser',
    customerPhone: '01111111111',
    customerEmail: 'admin@laapak.com',
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 13,
    totalAmount: '300.00',
    amountPaid: '0.00',
    status: 'draft',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-10-27T16:21:20.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 12,
    totalAmount: '2340.00',
    amountPaid: '100.00',
    status: 'partially_paid',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: 74,
    createdAt: 2025-10-27T14:58:47.000Z,
    customerName: 'saif',
    customerPhone: '01000000000',
    customerEmail: 'admin@laapak.com',
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 11,
    totalAmount: '300.00',
    amountPaid: '300.00',
    status: 'paid',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-10-27T14:07:54.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 10,
    totalAmount: '2000.00',
    amountPaid: '2000.00',
    status: 'paid',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-10-26T22:59:51.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 9,
    totalAmount: '670.00',
    amountPaid: '0.00',
    status: 'draft',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-10-26T22:55:37.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 8,
    totalAmount: '600.00',
    amountPaid: '0.00',
    status: 'draft',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-10-26T22:40:59.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 7,
    totalAmount: '600.00',
    amountPaid: '200.00',
    status: 'partially_paid',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-10-26T22:40:50.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  }
]
getAllInvoices called with repairRequestId: undefined
getAllInvoices called with repairRequestId: undefined
Query executed: 
        SELECT 
          i.id,
          i.totalAmount,
          i.amountPaid,
          i.status,
          i.currency,
          i.taxAmount,
          i.repairRequestId,
          i.createdAt,
          c.name as customerName,
          c.phone as customerPhone,
          c.email as customerEmail,
          rr.deviceBrand,
          rr.deviceModel
        FROM Invoice i
        LEFT JOIN RepairRequest rr ON i.repairRequestId = rr.id
        LEFT JOIN Customer c ON rr.customerId = c.id
        WHERE i.deletedAt IS NULL
        ORDER BY i.createdAt DESC
        LIMIT 50
      
Query params: []
Found invoices: [
  {
    id: 15,
    totalAmount: '3000.00',
    amountPaid: null,
    status: 'draft',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-11-14T07:50:33.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 14,
    totalAmount: '2340.00',
    amountPaid: '340.00',
    status: 'paid',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: 75,
    createdAt: 2025-10-27T16:23:18.000Z,
    customerName: 'Mahmoud Nasser',
    customerPhone: '01111111111',
    customerEmail: 'admin@laapak.com',
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 13,
    totalAmount: '300.00',
    amountPaid: '0.00',
    status: 'draft',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-10-27T16:21:20.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 12,
    totalAmount: '2340.00',
    amountPaid: '100.00',
    status: 'partially_paid',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: 74,
    createdAt: 2025-10-27T14:58:47.000Z,
    customerName: 'saif',
    customerPhone: '01000000000',
    customerEmail: 'admin@laapak.com',
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 11,
    totalAmount: '300.00',
    amountPaid: '300.00',
    status: 'paid',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-10-27T14:07:54.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 10,
    totalAmount: '2000.00',
    amountPaid: '2000.00',
    status: 'paid',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-10-26T22:59:51.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 9,
    totalAmount: '670.00',
    amountPaid: '0.00',
    status: 'draft',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-10-26T22:55:37.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 8,
    totalAmount: '600.00',
    amountPaid: '0.00',
    status: 'draft',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-10-26T22:40:59.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 7,
    totalAmount: '600.00',
    amountPaid: '200.00',
    status: 'partially_paid',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-10-26T22:40:50.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  }
]
Query executed: 
        SELECT 
          i.id,
          i.totalAmount,
          i.amountPaid,
          i.status,
          i.currency,
          i.taxAmount,
          i.repairRequestId,
          i.createdAt,
          c.name as customerName,
          c.phone as customerPhone,
          c.email as customerEmail,
          rr.deviceBrand,
          rr.deviceModel
        FROM Invoice i
        LEFT JOIN RepairRequest rr ON i.repairRequestId = rr.id
        LEFT JOIN Customer c ON rr.customerId = c.id
        WHERE i.deletedAt IS NULL
        ORDER BY i.createdAt DESC
        LIMIT 50
      
Query params: []
Found invoices: [
  {
    id: 15,
    totalAmount: '3000.00',
    amountPaid: null,
    status: 'draft',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-11-14T07:50:33.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 14,
    totalAmount: '2340.00',
    amountPaid: '340.00',
    status: 'paid',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: 75,
    createdAt: 2025-10-27T16:23:18.000Z,
    customerName: 'Mahmoud Nasser',
    customerPhone: '01111111111',
    customerEmail: 'admin@laapak.com',
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 13,
    totalAmount: '300.00',
    amountPaid: '0.00',
    status: 'draft',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-10-27T16:21:20.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 12,
    totalAmount: '2340.00',
    amountPaid: '100.00',
    status: 'partially_paid',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: 74,
    createdAt: 2025-10-27T14:58:47.000Z,
    customerName: 'saif',
    customerPhone: '01000000000',
    customerEmail: 'admin@laapak.com',
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 11,
    totalAmount: '300.00',
    amountPaid: '300.00',
    status: 'paid',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-10-27T14:07:54.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 10,
    totalAmount: '2000.00',
    amountPaid: '2000.00',
    status: 'paid',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-10-26T22:59:51.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 9,
    totalAmount: '670.00',
    amountPaid: '0.00',
    status: 'draft',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-10-26T22:55:37.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 8,
    totalAmount: '600.00',
    amountPaid: '0.00',
    status: 'draft',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-10-26T22:40:59.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 7,
    totalAmount: '600.00',
    amountPaid: '200.00',
    status: 'partially_paid',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-10-26T22:40:50.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  }
]
getAllInvoices called with repairRequestId: undefined
Query executed: 
        SELECT 
          i.id,
          i.totalAmount,
          i.amountPaid,
          i.status,
          i.currency,
          i.taxAmount,
          i.repairRequestId,
          i.createdAt,
          c.name as customerName,
          c.phone as customerPhone,
          c.email as customerEmail,
          rr.deviceBrand,
          rr.deviceModel
        FROM Invoice i
        LEFT JOIN RepairRequest rr ON i.repairRequestId = rr.id
        LEFT JOIN Customer c ON rr.customerId = c.id
        WHERE i.deletedAt IS NULL
        ORDER BY i.createdAt DESC
        LIMIT 50
      
Query params: []
Found invoices: [
  {
    id: 15,
    totalAmount: '3000.00',
    amountPaid: null,
    status: 'draft',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-11-14T07:50:33.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 14,
    totalAmount: '2340.00',
    amountPaid: '340.00',
    status: 'paid',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: 75,
    createdAt: 2025-10-27T16:23:18.000Z,
    customerName: 'Mahmoud Nasser',
    customerPhone: '01111111111',
    customerEmail: 'admin@laapak.com',
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 13,
    totalAmount: '300.00',
    amountPaid: '0.00',
    status: 'draft',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-10-27T16:21:20.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 12,
    totalAmount: '2340.00',
    amountPaid: '100.00',
    status: 'partially_paid',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: 74,
    createdAt: 2025-10-27T14:58:47.000Z,
    customerName: 'saif',
    customerPhone: '01000000000',
    customerEmail: 'admin@laapak.com',
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 11,
    totalAmount: '300.00',
    amountPaid: '300.00',
    status: 'paid',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-10-27T14:07:54.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 10,
    totalAmount: '2000.00',
    amountPaid: '2000.00',
    status: 'paid',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-10-26T22:59:51.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 9,
    totalAmount: '670.00',
    amountPaid: '0.00',
    status: 'draft',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-10-26T22:55:37.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 8,
    totalAmount: '600.00',
    amountPaid: '0.00',
    status: 'draft',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-10-26T22:40:59.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  },
  {
    id: 7,
    totalAmount: '600.00',
    amountPaid: '200.00',
    status: 'partially_paid',
    currency: 'EGP',
    taxAmount: '0.00',
    repairRequestId: null,
    createdAt: 2025-10-26T22:40:50.000Z,
    customerName: null,
    customerPhone: null,
    customerEmail: null,
    deviceBrand: null,
    deviceModel: null
  }
]
üîå Client disconnected: client_1763583774084_rconpgw7o (Total: 0)
üîó Client connected: client_1763584613647_ee8gyp443 (Total: 1)
