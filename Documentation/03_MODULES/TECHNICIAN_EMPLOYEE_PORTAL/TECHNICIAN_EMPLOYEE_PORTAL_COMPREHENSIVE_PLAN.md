# Ø®Ø·Ø© Ø§Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ø´Ø§Ù…Ù„Ø© Ù„Ø¨ÙˆØ±ØªØ§Ù„ Ø§Ù„ÙÙ†ÙŠÙŠÙ† ÙˆØ§Ù„Ù…ÙˆØ¸ÙÙŠÙ†
## Technician & Employee Portal Comprehensive Development Plan

**Ø§Ù„ØªØ§Ø±ÙŠØ®:** 2025-01-27  
**Ø§Ù„Ø­Ø§Ù„Ø©:** Production System  
**Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©:** ğŸ”¥ Ø¹Ø§Ù„ÙŠØ© Ø¬Ø¯Ø§Ù‹

---

## ğŸ“‹ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª

1. [Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ ÙˆØ§Ù„ØªØ­Ù„ÙŠÙ„](#Ø§Ù„ÙˆØ¶Ø¹-Ø§Ù„Ø­Ø§Ù„ÙŠ-ÙˆØ§Ù„ØªØ­Ù„ÙŠÙ„)
2. [Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ ÙˆØ§Ù„Ø«ØºØ±Ø§Øª](#Ø§Ù„Ù…Ø´Ø§ÙƒÙ„-ÙˆØ§Ù„Ø«ØºØ±Ø§Øª)
3. [Ø§Ù„Ø£Ù‡Ø¯Ø§Ù ÙˆØ§Ù„Ø±Ø¤ÙŠØ©](#Ø§Ù„Ø£Ù‡Ø¯Ø§Ù-ÙˆØ§Ù„Ø±Ø¤ÙŠØ©)
4. [Ø®Ø·Ø© Ø§Ù„ØªØ·ÙˆÙŠØ± - Backend](#Ø®Ø·Ø©-Ø§Ù„ØªØ·ÙˆÙŠØ±---backend)
5. [Ø®Ø·Ø© Ø§Ù„ØªØ·ÙˆÙŠØ± - Frontend](#Ø®Ø·Ø©-Ø§Ù„ØªØ·ÙˆÙŠØ±---frontend)
6. [Ø§Ù„ØªÙƒØ§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ù…ÙˆØ¯ÙŠÙˆÙ„Ø§Øª Ø§Ù„Ø£Ø®Ø±Ù‰](#Ø§Ù„ØªÙƒØ§Ù…Ù„-Ù…Ø¹-Ø§Ù„Ù…ÙˆØ¯ÙŠÙˆÙ„Ø§Øª-Ø§Ù„Ø£Ø®Ø±Ù‰)
7. [Ø§Ù„Ø£Ù…Ø§Ù† ÙˆØ§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª](#Ø§Ù„Ø£Ù…Ø§Ù†-ÙˆØ§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª)
8. [Ø®Ø·Ø© Ø§Ù„ØªÙ†ÙÙŠØ° (Production-Safe)](#Ø®Ø·Ø©-Ø§Ù„ØªÙ†ÙÙŠØ°-production-safe)
9. [Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± ÙˆØ§Ù„Ø¬ÙˆØ¯Ø©](#Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±-ÙˆØ§Ù„Ø¬ÙˆØ¯Ø©)
10. [Ø§Ù„ØªÙˆØ«ÙŠÙ‚](#Ø§Ù„ØªÙˆØ«ÙŠÙ‚)

---

## ğŸ” Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ ÙˆØ§Ù„ØªØ­Ù„ÙŠÙ„

### 1.1 Backend - Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ

#### Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø©:
- âœ… `backend/routes/technicianRoutes.js` (93 Ø³Ø·Ø±) - Routes Ù…Ø­Ø¯ÙˆØ¯Ø©
- âœ… `backend/controllers/technicianController.js` (685 Ø³Ø·Ø±) - Controller Ø£Ø³Ø§Ø³ÙŠ
- âœ… `backend/routes/technicians.js` (35 Ø³Ø·Ø±) - Routes Ø¨Ø³ÙŠØ·Ø© Ù„Ù„Ù‚ÙˆØ§Ø¦Ù…
- âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Employee Portal Ù…Ù†ÙØµÙ„
- âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Service Layer Ù…Ù†ÙØµÙ„
- âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Repository Pattern
- âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Activity Logging Ø´Ø§Ù…Ù„
- âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Audit Trail ÙƒØ§Ù…Ù„

#### Routes Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ù„Ù„ÙÙ†ÙŠÙŠÙ†:
```javascript
GET    /api/tech/dashboard              // Dashboard Ø§Ù„ÙÙ†ÙŠ
GET    /api/tech/jobs                   // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‡Ø§Ù…
GET    /api/tech/jobs/:id               // ØªÙØ§ØµÙŠÙ„ Ù…Ù‡Ù…Ø©
PUT    /api/tech/jobs/:id/status        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©
POST   /api/tech/jobs/:id/notes         // Ø¥Ø¶Ø§ÙØ© Ù…Ù„Ø§Ø­Ø¸Ø©
POST   /api/tech/jobs/:id/media         // Ø±ÙØ¹ ÙˆØ³Ø§Ø¦Ø·
GET    /api/tech/jobs/:id/media         // Ø¬Ù„Ø¨ Ø§Ù„ÙˆØ³Ø§Ø¦Ø·
POST   /api/tech/parts-request          // Ø·Ù„Ø¨ Ù‚Ø·Ø¹ ØºÙŠØ§Ø±
GET    /api/tech/parts-request/:id      // Ø­Ø§Ù„Ø© Ø·Ù„Ø¨ Ù‚Ø·Ø¹ ØºÙŠØ§Ø±
GET    /api/tech/profile                // Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ
PUT    /api/tech/profile                 // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ
PUT    /api/tech/status                 // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ÙÙ†ÙŠ (Online/Busy/Offline)
```

#### Routes Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ù„Ù„Ù…ÙˆØ¸ÙÙŠÙ†:
```javascript
âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Employee Portal Ù…Ù†ÙØµÙ„ Ø­Ø§Ù„ÙŠØ§Ù‹
âš ï¸ Ø§Ù„Ù…ÙˆØ¸ÙÙˆÙ† ÙŠØ³ØªØ®Ø¯Ù…ÙˆÙ† Ù†ÙØ³ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¹Ø§Ù… Ù…Ø¹ ØµÙ„Ø§Ø­ÙŠØ§Øª Ù…Ø­Ø¯ÙˆØ¯Ø©
```

#### Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ ÙÙŠ Backend:
1. **Routes Ù…Ø­Ø¯ÙˆØ¯Ø©** - ÙˆØ¸Ø§Ø¦Ù Ø£Ø³Ø§Ø³ÙŠØ© ÙÙ‚Ø·
2. **Ù„Ø§ ÙŠÙˆØ¬Ø¯ Employee Portal** - Ø§Ù„Ù…ÙˆØ¸ÙÙˆÙ† Ø¨Ø¯ÙˆÙ† Ø¨ÙˆØ±ØªØ§Ù„ Ù…Ø®ØµØµ
3. **Ù„Ø§ ÙŠÙˆØ¬Ø¯ Service Layer** - Logic ÙÙŠ Controller Ù…Ø¨Ø§Ø´Ø±Ø©
4. **Ù„Ø§ ÙŠÙˆØ¬Ø¯ Repository Pattern** - Database queries Ù…Ø¨Ø§Ø´Ø±Ø©
5. **Error Handling ØºÙŠØ± Ù…ÙˆØ­Ø¯** - Ù…Ø¹Ø§Ù„Ø¬Ø© Ø£Ø®Ø·Ø§Ø¡ Ù…Ø®ØªÙ„ÙØ©
6. **Ù„Ø§ ÙŠÙˆØ¬Ø¯ Caching** - ÙƒÙ„ Ø·Ù„Ø¨ ÙŠØ°Ù‡Ø¨ Ù„Ù„Ù€ Database
7. **Ù„Ø§ ÙŠÙˆØ¬Ø¯ Rate Limiting Ù…Ø­Ø¯Ø¯** - Rate limiting Ø¹Ø§Ù… ÙÙ‚Ø·
8. **Ù„Ø§ ÙŠÙˆØ¬Ø¯ Activity Logging Ø´Ø§Ù…Ù„** - ØªØªØ¨Ø¹ Ù…Ø­Ø¯ÙˆØ¯
9. **Ù„Ø§ ÙŠÙˆØ¬Ø¯ Audit Trail** - Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø³Ø¬Ù„ ÙƒØ§Ù…Ù„ Ù„Ù„ØªØºÙŠÙŠØ±Ø§Øª
10. **Ù„Ø§ ÙŠÙˆØ¬Ø¯ Real-time Updates** - Ù„Ø§ WebSocket
11. **Ù„Ø§ ÙŠÙˆØ¬Ø¯ Background Jobs** - ÙƒÙ„ Ø´ÙŠØ¡ synchronous
12. **Ù„Ø§ ÙŠÙˆØ¬Ø¯ File Upload Handler Ù…Ø­Ø³Ù‘Ù†** - Ø±ÙØ¹ Ù…Ù„ÙØ§Øª Ø¨Ø³ÙŠØ·

### 1.2 Frontend - Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ

#### Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø©:
- âœ… `TechnicianDashboard.js` - Dashboard Ø§Ù„ÙÙ†ÙŠ
- âœ… `JobsListPage.js` - Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‡Ø§Ù…
- âœ… `JobDetailsPage.js` - ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù‡Ù…Ø©
- âœ… `TechnicianProfilePage.js` - Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ
- âœ… `TechnicianHeader.js` - Header Ù…Ø®ØµØµ
- âœ… `TechnicianQRScanner.js` - Ù…Ø§Ø³Ø­ QR
- âœ… `TechnicianStatsCard.js` - Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
- âœ… `technicianService.js` - Service Ù„Ù„Ù€ API
- âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Employee Portal ÙÙŠ Frontend
- âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Real-time Updates
- âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Offline Support

#### Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ ÙÙŠ Frontend:
1. **ØµÙØ­Ø§Øª Ù…Ø­Ø¯ÙˆØ¯Ø©** - ÙˆØ¸Ø§Ø¦Ù Ø£Ø³Ø§Ø³ÙŠØ© ÙÙ‚Ø·
2. **Ù„Ø§ ÙŠÙˆØ¬Ø¯ Employee Portal** - Ø§Ù„Ù…ÙˆØ¸ÙÙˆÙ† Ø¨Ø¯ÙˆÙ† ÙˆØ§Ø¬Ù‡Ø© Ù…Ø®ØµØµØ©
3. **Ù„Ø§ ÙŠÙˆØ¬Ø¯ State Management Ù…Ø±ÙƒØ²ÙŠ** - Context API Ø¨Ø³ÙŠØ·
4. **Ù„Ø§ ÙŠÙˆØ¬Ø¯ Caching Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª** - ÙƒÙ„ Ù…Ø±Ø© fetch Ø¬Ø¯ÙŠØ¯
5. **Ù„Ø§ ÙŠÙˆØ¬Ø¯ Optimistic Updates** - Ù„Ø§ ØªØ­Ø¯ÙŠØ« ÙÙˆØ±ÙŠ
6. **Ù„Ø§ ÙŠÙˆØ¬Ø¯ Real-time Updates** - Ù„Ø§ WebSocket
7. **Forms Ø¨Ø³ÙŠØ·Ø©** - Ù„Ø§ validation Ù…ØªÙ‚Ø¯Ù…
8. **Ù„Ø§ ÙŠÙˆØ¬Ø¯ Error Boundaries** - Ø£Ø®Ø·Ø§Ø¡ Ù‚Ø¯ ØªÙƒØ³Ø± Ø§Ù„ØµÙØ­Ø©
9. **Ù„Ø§ ÙŠÙˆØ¬Ø¯ Loading States Ù…Ø­Ø³Ù‘Ù†Ø©** - Loading Ø¨Ø³ÙŠØ·
10. **Ù„Ø§ ÙŠÙˆØ¬Ø¯ Offline Support** - Ù„Ø§ ÙŠØ¹Ù…Ù„ Ø¨Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª
11. **Ù„Ø§ ÙŠÙˆØ¬Ø¯ PWA Features** - Ù„Ø§ Service Workers
12. **Ù„Ø§ ÙŠÙˆØ¬Ø¯ File Upload UI Ù…Ø­Ø³Ù‘Ù†** - Ø±ÙØ¹ Ù…Ù„ÙØ§Øª Ø¨Ø³ÙŠØ·

### 1.3 Database - Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ

#### Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©:
```sql
User                      -- Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† (Ø§Ù„ÙÙ†ÙŠÙˆÙ† ÙˆØ§Ù„Ù…ÙˆØ¸ÙÙˆÙ†)
RepairRequest             -- Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¥ØµÙ„Ø§Ø­
StatusUpdateLog           -- Ø³Ø¬Ù„ ØªØºÙŠÙŠØ±Ø§Øª Ø§Ù„Ø­Ø§Ù„Ø©
AuditLog                  -- Ø³Ø¬Ù„ Ø§Ù„ØªØ¯Ù‚ÙŠÙ‚
RepairRequestAttachment   -- Ø§Ù„Ù…Ø±ÙÙ‚Ø§Øª
SparePartRequest          -- Ø·Ù„Ø¨Ø§Øª Ù‚Ø·Ø¹ Ø§Ù„ØºÙŠØ§Ø±
```

#### Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ ÙÙŠ Database:
1. **Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¬Ø¯ÙˆÙ„ TechnicianStatus** - Ø§Ù„Ø­Ø§Ù„Ø© ÙÙŠ AuditLog ÙÙ‚Ø·
2. **Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¬Ø¯ÙˆÙ„ EmployeeActivity** - Ù„Ø§ ØªØªØ¨Ø¹ Ø£Ù†Ø´Ø·Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†
3. **Ù„Ø§ ÙŠÙˆØ¬Ø¯ Indexes Ù…Ø­Ø³Ù‘Ù†Ø©** - Ø¨Ø¹Ø¶ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ø¨Ø·ÙŠØ¦Ø©
4. **Ù„Ø§ ÙŠÙˆØ¬Ø¯ Full-Text Search** - Ø§Ù„Ø¨Ø­Ø« Ù…Ø­Ø¯ÙˆØ¯
5. **Ù„Ø§ ÙŠÙˆØ¬Ø¯ Partitioning** - Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ ÙƒØ¨ÙŠØ±Ø©
6. **Ù„Ø§ ÙŠÙˆØ¬Ø¯ Archiving Strategy** - Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØªØªØ±Ø§ÙƒÙ…

### 1.4 Integration - Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ

#### Ø§Ù„Ù…ÙˆØ¯ÙŠÙˆÙ„Ø§Øª Ø§Ù„Ù…ØªØµÙ„Ø©:
- âœ… **Repairs** - Ù…Ø±ØªØ¨Ø· (technicianId)
- âœ… **Customers** - Ù…Ø±ØªØ¨Ø· (customerId)
- âœ… **Devices** - Ù…Ø±ØªØ¨Ø· (deviceId)
- âœ… **Branches** - Ù…Ø±ØªØ¨Ø· (branchId)
- âš ï¸ **Inventory** - ØªÙƒØ§Ù…Ù„ Ø¬Ø²Ø¦ÙŠ (Ø·Ù„Ø¨ Ù‚Ø·Ø¹ ØºÙŠØ§Ø±)
- âš ï¸ **Finance** - ØªÙƒØ§Ù…Ù„ Ø¬Ø²Ø¦ÙŠ
- âš ï¸ **Notifications** - ØªÙƒØ§Ù…Ù„ Ø¬Ø²Ø¦ÙŠ
- âŒ **Reports** - ØªÙ‚Ø§Ø±ÙŠØ± Ù…Ø­Ø¯ÙˆØ¯Ø©
- âŒ **Analytics** - Ù„Ø§ ØªØ­Ù„ÙŠÙ„Ø§Øª
- âŒ **Time Tracking** - Ù„Ø§ ØªØªØ¨Ø¹ ÙˆÙ‚Øª Ø§Ù„Ø¹Ù…Ù„

---

## âš ï¸ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ ÙˆØ§Ù„Ø«ØºØ±Ø§Øª

### 2.1 Ù…Ø´Ø§ÙƒÙ„ Ø£Ù…Ù†ÙŠØ©

#### ğŸ”´ Ø­Ø±Ø¬Ø©:
1. **Authorization Gaps** - Ø¨Ø¹Ø¶ Routes Ø¨Ø¯ÙˆÙ† ÙØ­Øµ ØµÙ„Ø§Ø­ÙŠØ§Øª ÙƒØ§Ù…Ù„
2. **SQL Injection Risk** - Ø¨Ø¹Ø¶ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ø¨Ø¯ÙˆÙ† Prepared Statements
3. **XSS Vulnerability** - Ù„Ø§ ÙŠÙˆØ¬Ø¯ sanitization ÙÙŠ Ø¨Ø¹Ø¶ Ø§Ù„Ø£Ù…Ø§ÙƒÙ†
4. **CSRF Protection** - ØºÙŠØ± Ù…ÙØ¹Ù„ ÙÙŠ Ø¨Ø¹Ø¶ Routes
5. **Rate Limiting ØºÙŠØ± ÙƒØ§ÙÙŠ** - ÙŠÙ…ÙƒÙ† Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ø§Øª ÙƒØ«ÙŠØ±Ø©
6. **File Upload Security** - Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙØ­Øµ Ù„Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø±ÙÙˆØ¹Ø©
7. **Sensitive Data Exposure** - Ø¨Ø¹Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø³Ø© ÙÙŠ Logs

#### ğŸŸ¡ Ù…ØªÙˆØ³Ø·Ø©:
1. **Input Validation ØºÙŠØ± ÙƒØ§Ù…Ù„** - Ø¨Ø¹Ø¶ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø¨Ø¯ÙˆÙ† validation
2. **Session Management** - Ù„Ø§ ÙŠÙˆØ¬Ø¯ refresh tokens
3. **Password Policy** - Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø³ÙŠØ§Ø³Ø© ÙƒÙ„Ù…Ø§Øª Ù…Ø±ÙˆØ± Ù‚ÙˆÙŠØ©
4. **2FA** - Ù„Ø§ ÙŠÙˆØ¬Ø¯ Two-Factor Authentication

### 2.2 Ù…Ø´Ø§ÙƒÙ„ ÙˆØ¸ÙŠÙÙŠØ©

#### ğŸ”´ Ø­Ø±Ø¬Ø©:
1. **No Employee Portal** - Ø§Ù„Ù…ÙˆØ¸ÙÙˆÙ† Ø¨Ø¯ÙˆÙ† Ø¨ÙˆØ±ØªØ§Ù„ Ù…Ø®ØµØµ
2. **Performance Issues** - Ø¨Ø¹Ø¶ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ø¨Ø·ÙŠØ¦Ø©
3. **No Real-time Updates** - Ù„Ø§ ÙŠÙˆØ¬Ø¯ WebSocket
4. **No Offline Support** - Ù„Ø§ ÙŠØ¹Ù…Ù„ Ø¨Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª
5. **Limited Search** - Ø§Ù„Ø¨Ø­Ø« Ù…Ø­Ø¯ÙˆØ¯
6. **No Advanced Filters** - ÙÙ„Ø§ØªØ± Ø¨Ø³ÙŠØ·Ø©
7. **No Bulk Operations** - Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø© Ù…Ù‡Ø§Ù…
8. **No Time Tracking** - Ù„Ø§ ØªØªØ¨Ø¹ ÙˆÙ‚Øª Ø§Ù„Ø¹Ù…Ù„

#### ğŸŸ¡ Ù…ØªÙˆØ³Ø·Ø©:
1. **No Export Functionality** - Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
2. **No Print Templates** - Ù‚ÙˆØ§Ù„Ø¨ Ø·Ø¨Ø§Ø¹Ø© Ù…Ø­Ø¯ÙˆØ¯Ø©
3. **No Email/SMS Integration** - Ù„Ø§ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ©
4. **No Mobile App** - Ù„Ø§ ØªØ·Ø¨ÙŠÙ‚ Ù…ÙˆØ¨Ø§ÙŠÙ„
5. **No Analytics Dashboard** - Ù„Ø§ Ù„ÙˆØ­Ø© ØªØ­Ù„ÙŠÙ„Ø§Øª

### 2.3 Ù…Ø´Ø§ÙƒÙ„ ÙÙŠ Ø§Ù„ØªÙƒØ§Ù…Ù„

#### ğŸ”´ Ø­Ø±Ø¬Ø©:
1. **Inventory Integration** - ØªÙƒØ§Ù…Ù„ Ø¬Ø²Ø¦ÙŠ Ù…Ø¹ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†
2. **Finance Integration** - ØªÙƒØ§Ù…Ù„ Ø¬Ø²Ø¦ÙŠ Ù…Ø¹ Ø§Ù„Ù…Ø§Ù„ÙŠØ©
3. **Notification System** - ØªÙƒØ§Ù…Ù„ Ø¬Ø²Ø¦ÙŠ Ù…Ø¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
4. **Limited Reporting** - ØªÙ‚Ø§Ø±ÙŠØ± Ù…Ø­Ø¯ÙˆØ¯Ø©

#### ğŸŸ¡ Ù…ØªÙˆØ³Ø·Ø©:
1. **No CRM Integration** - Ù„Ø§ ØªÙƒØ§Ù…Ù„ ÙƒØ§Ù…Ù„ Ù…Ø¹ CRM
2. **No Analytics** - Ù„Ø§ ØªØ­Ù„ÙŠÙ„Ø§Øª Ù…ØªÙ‚Ø¯Ù…Ø©
3. **No Mobile App** - Ù„Ø§ ØªØ·Ø¨ÙŠÙ‚ Ù…ÙˆØ¨Ø§ÙŠÙ„

---

## ğŸ¯ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù ÙˆØ§Ù„Ø±Ø¤ÙŠØ©

### 3.1 Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

1. âœ… **Ù†Ø¸Ø§Ù… Ø¢Ù…Ù† ÙˆÙ…Ø³ØªÙ‚Ø±** - Ø£Ù…Ø§Ù† Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª
2. âœ… **Ø¨ÙˆØ±ØªØ§Ù„ Ù…ÙˆØ¸ÙÙŠÙ† ÙƒØ§Ù…Ù„** - ÙˆØ§Ø¬Ù‡Ø© Ù…Ø®ØµØµØ© Ù„Ù„Ù…ÙˆØ¸ÙÙŠÙ†
3. âœ… **Ø£Ø¯Ø§Ø¡ Ø¹Ø§Ù„ÙŠ** - Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ù…Ø­Ø³Ù‘Ù†Ø© Ùˆ caching
4. âœ… **ØªØ¬Ø±Ø¨Ø© Ù…Ø³ØªØ®Ø¯Ù… Ù…Ù…ØªØ§Ø²Ø©** - ÙˆØ§Ø¬Ù‡Ø© Ø³Ø±ÙŠØ¹Ø© ÙˆØ³Ù‡Ù„Ø©
5. âœ… **ØªÙƒØ§Ù…Ù„ ÙƒØ§Ù…Ù„** - Ø±Ø¨Ø· Ù…Ø¹ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙˆØ¯ÙŠÙˆÙ„Ø§Øª
6. âœ… **Real-time Updates** - ØªØ­Ø¯ÙŠØ«Ø§Øª ÙÙˆØ±ÙŠØ©
7. âœ… **Scalability** - Ù‚Ø§Ø¨Ù„ÙŠØ© Ù„Ù„ØªÙˆØ³Ø¹
8. âœ… **Maintainability** - Ø³Ù‡ÙˆÙ„Ø© Ø§Ù„ØµÙŠØ§Ù†Ø©
9. âœ… **Documentation** - ØªÙˆØ«ÙŠÙ‚ Ø´Ø§Ù…Ù„

### 3.2 Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©

#### Backend:
- [x] Employee Portal Routes & Controllers
- [x] Service Layer Ù…Ù†ÙØµÙ„
- [x] Repository Pattern
- [x] Activity Logging Ø´Ø§Ù…Ù„
- [x] Audit Trail ÙƒØ§Ù…Ù„
- [x] Caching Strategy
- [x] Background Jobs
- [x] Real-time Updates (WebSocket)
- [x] Advanced Search
- [x] Bulk Operations
- [x] Export Functionality
- [x] File Upload Handler Ù…Ø­Ø³Ù‘Ù†
- [x] Time Tracking System
- [x] Performance Monitoring

#### Frontend:
- [x] Employee Portal Pages
- [x] State Management Ù…Ø­Ø³Ù‘Ù†
- [x] Caching Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª
- [x] Optimistic Updates
- [x] Real-time Updates (WebSocket)
- [x] Advanced Forms
- [x] Error Boundaries
- [x] Loading States Ù…Ø­Ø³Ù‘Ù†Ø©
- [x] Offline Support
- [x] PWA Features
- [x] File Upload UI Ù…Ø­Ø³Ù‘Ù†
- [x] Time Tracking UI
- [x] Analytics Dashboard

---

## 4. Ø®Ø·Ø© Ø§Ù„ØªØ·ÙˆÙŠØ± - Backend

### 4.1 Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯

```
backend/
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ technicianRoutes.js          (Ù…Ø­Ø³Ù‘Ù†)
â”‚   â”œâ”€â”€ employeeRoutes.js             (Ø¬Ø¯ÙŠØ¯)
â”‚   â””â”€â”€ portalRoutes.js              (Ø¬Ø¯ÙŠØ¯ - Ù…Ø´ØªØ±Ùƒ)
â”œâ”€â”€ controllers/
â”‚   â”œâ”€â”€ technicianController.js      (Ù…Ø­Ø³Ù‘Ù†)
â”‚   â”œâ”€â”€ employeeController.js        (Ø¬Ø¯ÙŠØ¯)
â”‚   â””â”€â”€ portalController.js          (Ø¬Ø¯ÙŠØ¯ - Ù…Ø´ØªØ±Ùƒ)
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ technicianService.js         (Ø¬Ø¯ÙŠØ¯)
â”‚   â”œâ”€â”€ employeeService.js           (Ø¬Ø¯ÙŠØ¯)
â”‚   â”œâ”€â”€ portalService.js             (Ø¬Ø¯ÙŠØ¯ - Ù…Ø´ØªØ±Ùƒ)
â”‚   â””â”€â”€ timeTrackingService.js      (Ø¬Ø¯ÙŠØ¯)
â”œâ”€â”€ repositories/
â”‚   â”œâ”€â”€ technicianRepository.js      (Ø¬Ø¯ÙŠØ¯)
â”‚   â”œâ”€â”€ employeeRepository.js        (Ø¬Ø¯ÙŠØ¯)
â”‚   â””â”€â”€ portalRepository.js          (Ø¬Ø¯ÙŠØ¯ - Ù…Ø´ØªØ±Ùƒ)
â”œâ”€â”€ middleware/
â”‚   â”œâ”€â”€ portalAuthMiddleware.js      (Ø¬Ø¯ÙŠØ¯)
â”‚   â”œâ”€â”€ portalPermissionMiddleware.js (Ø¬Ø¯ÙŠØ¯)
â”‚   â””â”€â”€ portalRateLimit.js           (Ø¬Ø¯ÙŠØ¯)
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ TechnicianStatus.js          (Ø¬Ø¯ÙŠØ¯)
â”‚   â”œâ”€â”€ EmployeeActivity.js         (Ø¬Ø¯ÙŠØ¯)
â”‚   â””â”€â”€ TimeTracking.js              (Ø¬Ø¯ÙŠØ¯)
â””â”€â”€ validators/
    â”œâ”€â”€ technicianValidator.js       (Ø¬Ø¯ÙŠØ¯)
    â””â”€â”€ employeeValidator.js         (Ø¬Ø¯ÙŠØ¯)
```

### 4.2 Routes Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ÙˆØ§Ù„Ù…Ø­Ø³Ù‘Ù†Ø©

#### 4.2.1 Technician Routes (Ù…Ø­Ø³Ù‘Ù†Ø©)

```javascript
// ============= Dashboard =============
GET    /api/tech/dashboard                    // Dashboard Ø´Ø§Ù…Ù„
GET    /api/tech/dashboard/stats               // Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù…ÙØµÙ„Ø©
GET    /api/tech/dashboard/performance         // Ø£Ø¯Ø§Ø¡ Ø§Ù„ÙÙ†ÙŠ

// ============= Jobs Management =============
GET    /api/tech/jobs                         // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‡Ø§Ù… (Ù…Ø­Ø³Ù‘Ù†Ø©)
GET    /api/tech/jobs/:id                     // ØªÙØ§ØµÙŠÙ„ Ù…Ù‡Ù…Ø© (Ù…Ø­Ø³Ù‘Ù†Ø©)
PUT    /api/tech/jobs/:id                     // ØªØ­Ø¯ÙŠØ« Ù…Ù‡Ù…Ø© (Ø¬Ø¯ÙŠØ¯)
PUT    /api/tech/jobs/:id/status               // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø© (Ù…Ø­Ø³Ù‘Ù†)
POST   /api/tech/jobs/:id/start               // Ø¨Ø¯Ø¡ Ø§Ù„Ø¹Ù…Ù„ (Ø¬Ø¯ÙŠØ¯)
POST   /api/tech/jobs/:id/pause               // Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª (Ø¬Ø¯ÙŠØ¯)
POST   /api/tech/jobs/:id/complete            // Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ù‡Ù…Ø© (Ø¬Ø¯ÙŠØ¯)
POST   /api/tech/jobs/:id/cancel              // Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…Ù‡Ù…Ø© (Ø¬Ø¯ÙŠØ¯)
POST   /api/tech/jobs/bulk-update             // ØªØ­Ø¯ÙŠØ« Ø¬Ù…Ø§Ø¹ÙŠ (Ø¬Ø¯ÙŠØ¯)

// ============= Notes & Communication =============
POST   /api/tech/jobs/:id/notes               // Ø¥Ø¶Ø§ÙØ© Ù…Ù„Ø§Ø­Ø¸Ø© (Ù…Ø­Ø³Ù‘Ù†)
PUT    /api/tech/jobs/:id/notes/:noteId       // ØªØ­Ø¯ÙŠØ« Ù…Ù„Ø§Ø­Ø¸Ø© (Ø¬Ø¯ÙŠØ¯)
DELETE /api/tech/jobs/:id/notes/:noteId       // Ø­Ø°Ù Ù…Ù„Ø§Ø­Ø¸Ø© (Ø¬Ø¯ÙŠØ¯)
GET    /api/tech/jobs/:id/timeline            // Timeline ÙƒØ§Ù…Ù„ (Ø¬Ø¯ÙŠØ¯)

// ============= Media Management =============
POST   /api/tech/jobs/:id/media               // Ø±ÙØ¹ ÙˆØ³Ø§Ø¦Ø· (Ù…Ø­Ø³Ù‘Ù†)
GET    /api/tech/jobs/:id/media               // Ø¬Ù„Ø¨ Ø§Ù„ÙˆØ³Ø§Ø¦Ø· (Ù…Ø­Ø³Ù‘Ù†)
DELETE /api/tech/jobs/:id/media/:mediaId     // Ø­Ø°Ù ÙˆØ³Ø§Ø¦Ø· (Ø¬Ø¯ÙŠØ¯)
POST   /api/tech/jobs/:id/media/bulk-upload   // Ø±ÙØ¹ Ù…ØªØ¹Ø¯Ø¯ (Ø¬Ø¯ÙŠØ¯)

// ============= Parts Management =============
POST   /api/tech/parts-request                // Ø·Ù„Ø¨ Ù‚Ø·Ø¹ ØºÙŠØ§Ø± (Ù…Ø­Ø³Ù‘Ù†)
GET    /api/tech/parts-request                 // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª (Ø¬Ø¯ÙŠØ¯)
GET    /api/tech/parts-request/:id            // ØªÙØ§ØµÙŠÙ„ Ø·Ù„Ø¨ (Ù…Ø­Ø³Ù‘Ù†)
PUT    /api/tech/parts-request/:id            // ØªØ­Ø¯ÙŠØ« Ø·Ù„Ø¨ (Ø¬Ø¯ÙŠØ¯)
DELETE /api/tech/parts-request/:id            // Ø¥Ù„ØºØ§Ø¡ Ø·Ù„Ø¨ (Ø¬Ø¯ÙŠØ¯)

// ============= Profile & Settings =============
GET    /api/tech/profile                      // Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ (Ù…Ø­Ø³Ù‘Ù†)
PUT    /api/tech/profile                      // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù„Ù (Ù…Ø­Ø³Ù‘Ù†)
PUT    /api/tech/status                       // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø© (Ù…Ø­Ø³Ù‘Ù†)
GET    /api/tech/settings                     // Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª (Ø¬Ø¯ÙŠØ¯)
PUT    /api/tech/settings                     // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª (Ø¬Ø¯ÙŠØ¯)

// ============= Time Tracking =============
POST   /api/tech/time-tracking/clock-in       // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ (Ø¬Ø¯ÙŠØ¯)
POST   /api/tech/time-tracking/clock-out      // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ (Ø¬Ø¯ÙŠØ¯)
GET    /api/tech/time-tracking/history         // Ø³Ø¬Ù„ Ø§Ù„ÙˆÙ‚Øª (Ø¬Ø¯ÙŠØ¯)
GET    /api/tech/time-tracking/stats           // Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ÙˆÙ‚Øª (Ø¬Ø¯ÙŠØ¯)

// ============= Reports & Analytics =============
GET    /api/tech/reports/performance          // ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø£Ø¯Ø§Ø¡ (Ø¬Ø¯ÙŠØ¯)
GET    /api/tech/reports/jobs                 // ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ù‡Ø§Ù… (Ø¬Ø¯ÙŠØ¯)
GET    /api/tech/reports/export               // ØªØµØ¯ÙŠØ± Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± (Ø¬Ø¯ÙŠØ¯)

// ============= Search & Filters =============
GET    /api/tech/search                       // Ø¨Ø­Ø« Ù…ØªÙ‚Ø¯Ù… (Ø¬Ø¯ÙŠØ¯)
GET    /api/tech/filters                      // ÙÙ„Ø§ØªØ± Ù…ØªØ§Ø­Ø© (Ø¬Ø¯ÙŠØ¯)
```

#### 4.2.2 Employee Routes (Ø¬Ø¯ÙŠØ¯)

```javascript
// ============= Dashboard =============
GET    /api/employee/dashboard                // Dashboard Ø´Ø§Ù…Ù„
GET    /api/employee/dashboard/stats          // Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù…ÙØµÙ„Ø©

// ============= Repairs Management =============
GET    /api/employee/repairs                  // Ù‚Ø§Ø¦Ù…Ø© Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¥ØµÙ„Ø§Ø­
GET    /api/employee/repairs/:id              // ØªÙØ§ØµÙŠÙ„ Ø·Ù„Ø¨
POST   /api/employee/repairs                  // Ø¥Ù†Ø´Ø§Ø¡ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯
PUT    /api/employee/repairs/:id             // ØªØ­Ø¯ÙŠØ« Ø·Ù„Ø¨
PUT    /api/employee/repairs/:id/status      // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©
POST   /api/employee/repairs/:id/assign      // ØªØ¹ÙŠÙŠÙ† ÙÙ†ÙŠ

// ============= Customers Management =============
GET    /api/employee/customers                // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
GET    /api/employee/customers/:id           // ØªÙØ§ØµÙŠÙ„ Ø¹Ù…ÙŠÙ„
POST   /api/employee/customers                // Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯
PUT    /api/employee/customers/:id           // ØªØ­Ø¯ÙŠØ« Ø¹Ù…ÙŠÙ„

// ============= Devices Management =============
GET    /api/employee/devices                 // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©
GET    /api/employee/devices/:id             // ØªÙØ§ØµÙŠÙ„ Ø¬Ù‡Ø§Ø²
POST   /api/employee/devices                 // Ø¥Ø¶Ø§ÙØ© Ø¬Ù‡Ø§Ø² Ø¬Ø¯ÙŠØ¯
PUT    /api/employee/devices/:id             // ØªØ­Ø¯ÙŠØ« Ø¬Ù‡Ø§Ø²

// ============= Quotations =============
GET    /api/employee/quotations              // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ø±ÙˆØ¶
GET    /api/employee/quotations/:id          // ØªÙØ§ØµÙŠÙ„ Ø¹Ø±Ø¶
POST   /api/employee/quotations              // Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ø±Ø¶
PUT    /api/employee/quotations/:id         // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶
POST   /api/employee/quotations/:id/approve  // Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø¹Ø±Ø¶

// ============= Invoices =============
GET    /api/employee/invoices                // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙÙˆØ§ØªÙŠØ±
GET    /api/employee/invoices/:id            // ØªÙØ§ØµÙŠÙ„ ÙØ§ØªÙˆØ±Ø©
POST   /api/employee/invoices                // Ø¥Ù†Ø´Ø§Ø¡ ÙØ§ØªÙˆØ±Ø©
PUT    /api/employee/invoices/:id           // ØªØ­Ø¯ÙŠØ« ÙØ§ØªÙˆØ±Ø©

// ============= Profile & Settings =============
GET    /api/employee/profile                 // Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ
PUT    /api/employee/profile                 // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù„Ù
GET    /api/employee/settings                // Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
PUT    /api/employee/settings                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª

// ============= Time Tracking =============
POST   /api/employee/time-tracking/clock-in   // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
POST   /api/employee/time-tracking/clock-out // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
GET    /api/employee/time-tracking/history    // Ø³Ø¬Ù„ Ø§Ù„ÙˆÙ‚Øª

// ============= Reports =============
GET    /api/employee/reports/daily          // ØªÙ‚Ø±ÙŠØ± ÙŠÙˆÙ…ÙŠ
GET    /api/employee/reports/performance     // ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø£Ø¯Ø§Ø¡
GET    /api/employee/reports/export          // ØªØµØ¯ÙŠØ± Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±
```

#### 4.2.3 Portal Shared Routes (Ø¬Ø¯ÙŠØ¯)

```javascript
// ============= Notifications =============
GET    /api/portal/notifications             // Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
PUT    /api/portal/notifications/:id/read    // Ù‚Ø±Ø§Ø¡Ø© Ø¥Ø´Ø¹Ø§Ø±
PUT    /api/portal/notifications/read-all    // Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„ÙƒÙ„
DELETE /api/portal/notifications/:id        // Ø­Ø°Ù Ø¥Ø´Ø¹Ø§Ø±

// ============= Search =============
GET    /api/portal/search                    // Ø¨Ø­Ø« Ø¹Ø§Ù…
GET    /api/portal/search/suggestions        // Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ø§Ù„Ø¨Ø­Ø«

// ============= File Upload =============
POST   /api/portal/upload                    // Ø±ÙØ¹ Ù…Ù„Ù
POST   /api/portal/upload/multiple           // Ø±ÙØ¹ Ù…ØªØ¹Ø¯Ø¯
DELETE /api/portal/upload/:fileId           // Ø­Ø°Ù Ù…Ù„Ù

// ============= Real-time =============
WS     /api/portal/ws                         // WebSocket connection
```

### 4.3 Service Layer

#### 4.3.1 Technician Service

```javascript
// backend/services/technicianService.js

class TechnicianService {
  // Dashboard
  async getDashboard(technicianId, filters) {}
  async getStats(technicianId, dateRange) {}
  async getPerformance(technicianId, period) {}
  
  // Jobs
  async getJobs(technicianId, filters, pagination) {}
  async getJobById(technicianId, jobId) {}
  async updateJob(technicianId, jobId, data) {}
  async updateJobStatus(technicianId, jobId, status, notes) {}
  async startJob(technicianId, jobId) {}
  async pauseJob(technicianId, jobId) {}
  async completeJob(technicianId, jobId, data) {}
  async cancelJob(technicianId, jobId, reason) {}
  async bulkUpdateJobs(technicianId, jobIds, updates) {}
  
  // Notes
  async addNote(technicianId, jobId, note) {}
  async updateNote(technicianId, jobId, noteId, note) {}
  async deleteNote(technicianId, jobId, noteId) {}
  async getTimeline(technicianId, jobId) {}
  
  // Media
  async uploadMedia(technicianId, jobId, files) {}
  async getMedia(technicianId, jobId) {}
  async deleteMedia(technicianId, jobId, mediaId) {}
  async bulkUploadMedia(technicianId, jobId, files) {}
  
  // Parts
  async createPartsRequest(technicianId, data) {}
  async getPartsRequests(technicianId, filters) {}
  async getPartsRequestById(technicianId, requestId) {}
  async updatePartsRequest(technicianId, requestId, data) {}
  async cancelPartsRequest(technicianId, requestId) {}
  
  // Profile
  async getProfile(technicianId) {}
  async updateProfile(technicianId, data) {}
  async updateStatus(technicianId, status) {}
  async getSettings(technicianId) {}
  async updateSettings(technicianId, settings) {}
  
  // Time Tracking
  async clockIn(technicianId, location) {}
  async clockOut(technicianId) {}
  async getTimeHistory(technicianId, dateRange) {}
  async getTimeStats(technicianId, period) {}
  
  // Reports
  async getPerformanceReport(technicianId, period) {}
  async getJobsReport(technicianId, filters) {}
  async exportReport(technicianId, reportType, format) {}
  
  // Search
  async search(technicianId, query, filters) {}
  async getFilters(technicianId) {}
}
```

#### 4.3.2 Employee Service

```javascript
// backend/services/employeeService.js

class EmployeeService {
  // Dashboard
  async getDashboard(employeeId, filters) {}
  async getStats(employeeId, dateRange) {}
  
  // Repairs
  async getRepairs(employeeId, filters, pagination) {}
  async getRepairById(employeeId, repairId) {}
  async createRepair(employeeId, data) {}
  async updateRepair(employeeId, repairId, data) {}
  async updateRepairStatus(employeeId, repairId, status) {}
  async assignTechnician(employeeId, repairId, technicianId) {}
  
  // Customers
  async getCustomers(employeeId, filters, pagination) {}
  async getCustomerById(employeeId, customerId) {}
  async createCustomer(employeeId, data) {}
  async updateCustomer(employeeId, customerId, data) {}
  
  // Devices
  async getDevices(employeeId, filters, pagination) {}
  async getDeviceById(employeeId, deviceId) {}
  async createDevice(employeeId, data) {}
  async updateDevice(employeeId, deviceId, data) {}
  
  // Quotations
  async getQuotations(employeeId, filters, pagination) {}
  async getQuotationById(employeeId, quotationId) {}
  async createQuotation(employeeId, data) {}
  async updateQuotation(employeeId, quotationId, data) {}
  async approveQuotation(employeeId, quotationId) {}
  
  // Invoices
  async getInvoices(employeeId, filters, pagination) {}
  async getInvoiceById(employeeId, invoiceId) {}
  async createInvoice(employeeId, data) {}
  async updateInvoice(employeeId, invoiceId, data) {}
  
  // Profile
  async getProfile(employeeId) {}
  async updateProfile(employeeId, data) {}
  async getSettings(employeeId) {}
  async updateSettings(employeeId, settings) {}
  
  // Time Tracking
  async clockIn(employeeId, location) {}
  async clockOut(employeeId) {}
  async getTimeHistory(employeeId, dateRange) {}
  
  // Reports
  async getDailyReport(employeeId, date) {}
  async getPerformanceReport(employeeId, period) {}
  async exportReport(employeeId, reportType, format) {}
}
```

### 4.4 Repository Pattern

#### 4.4.1 Technician Repository

```javascript
// backend/repositories/technicianRepository.js

class TechnicianRepository {
  // Jobs
  async findJobsByTechnician(technicianId, filters, pagination) {}
  async findJobById(technicianId, jobId) {}
  async updateJob(jobId, data) {}
  async updateJobStatus(jobId, status, notes, changedById) {}
  
  // Notes
  async createNote(jobId, note, userId) {}
  async updateNote(noteId, note) {}
  async deleteNote(noteId) {}
  async findNotesByJobId(jobId) {}
  
  // Media
  async createMedia(jobId, mediaData) {}
  async findMediaByJobId(jobId) {}
  async deleteMedia(mediaId) {}
  
  // Parts
  async createPartsRequest(data) {}
  async findPartsRequestsByTechnician(technicianId, filters) {}
  async findPartsRequestById(requestId) {}
  async updatePartsRequest(requestId, data) {}
  async deletePartsRequest(requestId) {}
  
  // Status
  async updateTechnicianStatus(technicianId, status) {}
  async getTechnicianStatus(technicianId) {}
  
  // Time Tracking
  async createTimeEntry(data) {}
  async findTimeEntriesByTechnician(technicianId, dateRange) {}
  async getTimeStats(technicianId, period) {}
}
```

### 4.5 Database Schema Updates

#### 4.5.1 New Tables

```sql
-- Technician Status Table
CREATE TABLE TechnicianStatus (
  id INT PRIMARY KEY AUTO_INCREMENT,
  technicianId INT NOT NULL,
  status ENUM('ONLINE', 'BUSY', 'BREAK', 'OFFLINE') DEFAULT 'OFFLINE',
  location JSON,
  lastSeenAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  FOREIGN KEY (technicianId) REFERENCES User(id),
  INDEX idx_technician_status (technicianId, status),
  INDEX idx_last_seen (lastSeenAt)
);

-- Employee Activity Table
CREATE TABLE EmployeeActivity (
  id INT PRIMARY KEY AUTO_INCREMENT,
  employeeId INT NOT NULL,
  activityType VARCHAR(50) NOT NULL,
  entityType VARCHAR(50),
  entityId INT,
  details JSON,
  ipAddress VARCHAR(45),
  userAgent TEXT,
  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (employeeId) REFERENCES User(id),
  INDEX idx_employee_activity (employeeId, createdAt),
  INDEX idx_activity_type (activityType, createdAt)
);

-- Time Tracking Table
CREATE TABLE TimeTracking (
  id INT PRIMARY KEY AUTO_INCREMENT,
  userId INT NOT NULL,
  userType ENUM('TECHNICIAN', 'EMPLOYEE') NOT NULL,
  clockInAt TIMESTAMP NOT NULL,
  clockOutAt TIMESTAMP NULL,
  location JSON,
  totalMinutes INT,
  breakMinutes INT DEFAULT 0,
  notes TEXT,
  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  FOREIGN KEY (userId) REFERENCES User(id),
  INDEX idx_user_time (userId, clockInAt),
  INDEX idx_date_range (clockInAt, clockOutAt)
);

-- Portal Notifications Table (if not exists)
CREATE TABLE PortalNotification (
  id INT PRIMARY KEY AUTO_INCREMENT,
  userId INT NOT NULL,
  userType ENUM('TECHNICIAN', 'EMPLOYEE', 'CUSTOMER') NOT NULL,
  type VARCHAR(50) NOT NULL,
  title VARCHAR(255) NOT NULL,
  message TEXT,
  data JSON,
  isRead BOOLEAN DEFAULT FALSE,
  readAt TIMESTAMP NULL,
  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (userId) REFERENCES User(id),
  INDEX idx_user_notifications (userId, isRead, createdAt),
  INDEX idx_type (type, createdAt)
);
```

#### 4.5.2 Indexes Optimization

```sql
-- Optimize existing tables
ALTER TABLE RepairRequest ADD INDEX idx_technician_status (technicianId, status, createdAt);
ALTER TABLE RepairRequest ADD INDEX idx_status_created (status, createdAt);
ALTER TABLE StatusUpdateLog ADD INDEX idx_repair_created (repairRequestId, createdAt);
ALTER TABLE AuditLog ADD INDEX idx_entity_user (entityType, entityId, userId, createdAt);
```

### 4.6 Security Enhancements

#### 4.6.1 Portal Auth Middleware

```javascript
// backend/middleware/portalAuthMiddleware.js

const portalAuthMiddleware = (allowedTypes = ['TECHNICIAN', 'EMPLOYEE']) => {
  return async (req, res, next) => {
    try {
      if (!req.user) {
        return res.status(401).json({
          success: false,
          message: 'Authentication required'
        });
      }

      const userRole = req.user.roleId || req.user.role;
      const userType = getUserType(userRole);

      if (!allowedTypes.includes(userType)) {
        return res.status(403).json({
          success: false,
          message: 'Access denied: Invalid user type'
        });
      }

      // Check if user is active
      if (!req.user.isActive) {
        return res.status(403).json({
          success: false,
          message: 'Account is inactive'
        });
      }

      req.userType = userType;
      next();
    } catch (error) {
      console.error('Error in portal auth middleware:', error);
      return res.status(500).json({
        success: false,
        message: 'Error checking authentication'
      });
    }
  };
};

function getUserType(roleId) {
  const roleMap = {
    1: 'ADMIN',
    2: 'MANAGER',
    3: 'EMPLOYEE',
    6: 'TECHNICIAN',
    8: 'CUSTOMER'
  };
  return roleMap[roleId] || 'UNKNOWN';
}
```

#### 4.6.2 Portal Permission Middleware

```javascript
// backend/middleware/portalPermissionMiddleware.js

const portalPermissionMiddleware = (requiredPermission) => {
  return async (req, res, next) => {
    try {
      const userId = req.user.id;
      const userType = req.userType;
      const roleId = req.user.roleId || req.user.role;

      // Admin has all permissions
      if (roleId === 1) {
        return next();
      }

      // Check permission based on user type
      const hasPermission = await checkPortalPermission(
        userType,
        roleId,
        requiredPermission,
        req
      );

      if (!hasPermission) {
        return res.status(403).json({
          success: false,
          message: 'Access denied: Insufficient permissions',
          required: requiredPermission
        });
      }

      next();
    } catch (error) {
      console.error('Error in portal permission middleware:', error);
      return res.status(500).json({
        success: false,
        message: 'Error checking permissions'
      });
    }
  };
};

async function checkPortalPermission(userType, roleId, permission, req) {
  // Technician permissions
  if (userType === 'TECHNICIAN') {
    return await checkTechnicianPermission(roleId, permission, req);
  }

  // Employee permissions
  if (userType === 'EMPLOYEE') {
    return await checkEmployeePermission(roleId, permission, req);
  }

  return false;
}
```

#### 4.6.3 Rate Limiting

```javascript
// backend/middleware/portalRateLimit.js

const rateLimit = require('express-rate-limit');

const portalRateLimit = rateLimit({
  windowMs: 15 * 60 * 1000, // 15 minutes
  max: 100, // limit each IP to 100 requests per windowMs
  message: {
    success: false,
    message: 'Too many requests, please try again later'
  },
  standardHeaders: true,
  legacyHeaders: false,
});

const strictRateLimit = rateLimit({
  windowMs: 15 * 60 * 1000,
  max: 20,
  message: {
    success: false,
    message: 'Too many requests, please try again later'
  }
});

module.exports = {
  portalRateLimit,
  strictRateLimit
};
```

### 4.7 Real-time Updates (WebSocket)

```javascript
// backend/services/websocketService.js

const WebSocket = require('ws');

class WebSocketService {
  constructor(server) {
    this.wss = new WebSocket.Server({ server, path: '/api/portal/ws' });
    this.clients = new Map(); // userId -> Set of WebSocket connections
    
    this.setup();
  }

  setup() {
    this.wss.on('connection', (ws, req) => {
      // Authenticate connection
      const user = this.authenticateConnection(req);
      if (!user) {
        ws.close(1008, 'Unauthorized');
        return;
      }

      // Store connection
      if (!this.clients.has(user.id)) {
        this.clients.set(user.id, new Set());
      }
      this.clients.get(user.id).add(ws);

      // Handle messages
      ws.on('message', (message) => {
        this.handleMessage(user, ws, message);
      });

      // Handle disconnect
      ws.on('close', () => {
        this.clients.get(user.id)?.delete(ws);
        if (this.clients.get(user.id)?.size === 0) {
          this.clients.delete(user.id);
        }
      });
    });
  }

  // Broadcast to specific user
  broadcastToUser(userId, event, data) {
    const userClients = this.clients.get(userId);
    if (userClients) {
      const message = JSON.stringify({ event, data });
      userClients.forEach(ws => {
        if (ws.readyState === WebSocket.OPEN) {
          ws.send(message);
        }
      });
    }
  }

  // Broadcast to all technicians
  broadcastToTechnicians(event, data) {
    // Implementation
  }

  // Broadcast to all employees
  broadcastToEmployees(event, data) {
    // Implementation
  }
}

module.exports = WebSocketService;
```

---

## 5. Ø®Ø·Ø© Ø§Ù„ØªØ·ÙˆÙŠØ± - Frontend

### 5.1 Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯

```
frontend/react-app/src/
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ technician/
â”‚   â”‚   â”œâ”€â”€ TechnicianDashboard.js        (Ù…Ø­Ø³Ù‘Ù†)
â”‚   â”‚   â”œâ”€â”€ JobsListPage.js               (Ù…Ø­Ø³Ù‘Ù†)
â”‚   â”‚   â”œâ”€â”€ JobDetailsPage.js             (Ù…Ø­Ø³Ù‘Ù†)
â”‚   â”‚   â”œâ”€â”€ TechnicianProfilePage.js      (Ù…Ø­Ø³Ù‘Ù†)
â”‚   â”‚   â”œâ”€â”€ TimeTrackingPage.js           (Ø¬Ø¯ÙŠØ¯)
â”‚   â”‚   â””â”€â”€ ReportsPage.js                (Ø¬Ø¯ÙŠØ¯)
â”‚   â””â”€â”€ employee/
â”‚       â”œâ”€â”€ EmployeeDashboard.js          (Ø¬Ø¯ÙŠØ¯)
â”‚       â”œâ”€â”€ RepairsManagementPage.js       (Ø¬Ø¯ÙŠØ¯)
â”‚       â”œâ”€â”€ CustomersManagementPage.js     (Ø¬Ø¯ÙŠØ¯)
â”‚       â”œâ”€â”€ DevicesManagementPage.js       (Ø¬Ø¯ÙŠØ¯)
â”‚       â”œâ”€â”€ QuotationsPage.js              (Ø¬Ø¯ÙŠØ¯)
â”‚       â”œâ”€â”€ InvoicesPage.js                (Ø¬Ø¯ÙŠØ¯)
â”‚       â”œâ”€â”€ EmployeeProfilePage.js         (Ø¬Ø¯ÙŠØ¯)
â”‚       â””â”€â”€ ReportsPage.js                 (Ø¬Ø¯ÙŠØ¯)
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ technician/
â”‚   â”‚   â”œâ”€â”€ TechnicianHeader.js           (Ù…Ø­Ø³Ù‘Ù†)
â”‚   â”‚   â”œâ”€â”€ TechnicianStatsCard.js        (Ù…Ø­Ø³Ù‘Ù†)
â”‚   â”‚   â”œâ”€â”€ JobCard.js                     (Ù…Ø­Ø³Ù‘Ù†)
â”‚   â”‚   â”œâ”€â”€ JobDetailsView.js              (Ø¬Ø¯ÙŠØ¯)
â”‚   â”‚   â”œâ”€â”€ MediaUploader.js               (Ø¬Ø¯ÙŠØ¯)
â”‚   â”‚   â”œâ”€â”€ PartsRequestForm.js            (Ø¬Ø¯ÙŠØ¯)
â”‚   â”‚   â””â”€â”€ TimeTrackingWidget.js          (Ø¬Ø¯ÙŠØ¯)
â”‚   â””â”€â”€ employee/
â”‚       â”œâ”€â”€ EmployeeHeader.js              (Ø¬Ø¯ÙŠØ¯)
â”‚       â”œâ”€â”€ QuickActionsPanel.js           (Ø¬Ø¯ÙŠØ¯)
â”‚       â”œâ”€â”€ RepairsTable.js                (Ø¬Ø¯ÙŠØ¯)
â”‚       â”œâ”€â”€ CustomerForm.js                (Ø¬Ø¯ÙŠØ¯)
â”‚       â””â”€â”€ DeviceForm.js                  (Ø¬Ø¯ÙŠØ¯)
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ technicianService.js               (Ù…Ø­Ø³Ù‘Ù†)
â”‚   â”œâ”€â”€ employeeService.js                 (Ø¬Ø¯ÙŠØ¯)
â”‚   â”œâ”€â”€ portalService.js                   (Ø¬Ø¯ÙŠØ¯)
â”‚   â””â”€â”€ websocketService.js                (Ø¬Ø¯ÙŠØ¯)
â”œâ”€â”€ stores/
â”‚   â”œâ”€â”€ technicianStore.js                 (Ø¬Ø¯ÙŠØ¯)
â”‚   â”œâ”€â”€ employeeStore.js                   (Ø¬Ø¯ÙŠØ¯)
â”‚   â””â”€â”€ portalStore.js                     (Ø¬Ø¯ÙŠØ¯)
â””â”€â”€ hooks/
    â”œâ”€â”€ useTechnician.js                    (Ø¬Ø¯ÙŠØ¯)
    â”œâ”€â”€ useEmployee.js                      (Ø¬Ø¯ÙŠØ¯)
    â”œâ”€â”€ useWebSocket.js                     (Ø¬Ø¯ÙŠØ¯)
    â””â”€â”€ useTimeTracking.js                  (Ø¬Ø¯ÙŠØ¯)
```

### 5.2 State Management (Zustand)

#### 5.2.1 Technician Store

```javascript
// frontend/react-app/src/stores/technicianStore.js

import { create } from 'zustand';
import { devtools, persist } from 'zustand/middleware';

const useTechnicianStore = create(
  devtools(
    persist(
      (set, get) => ({
        // State
        dashboard: null,
        jobs: [],
        currentJob: null,
        stats: null,
        status: 'OFFLINE',
        loading: false,
        error: null,

        // Actions
        setDashboard: (data) => set({ dashboard: data }),
        setJobs: (jobs) => set({ jobs }),
        setCurrentJob: (job) => set({ currentJob: job }),
        updateJob: (jobId, updates) => {
          const jobs = get().jobs.map(job =>
            job.id === jobId ? { ...job, ...updates } : job
          );
          set({ jobs });
        },
        setStatus: (status) => set({ status }),
        setLoading: (loading) => set({ loading }),
        setError: (error) => set({ error }),
        
        // Reset
        reset: () => set({
          dashboard: null,
          jobs: [],
          currentJob: null,
          stats: null,
          status: 'OFFLINE',
          loading: false,
          error: null
        })
      }),
      {
        name: 'technician-store',
        partialize: (state) => ({
          status: state.status,
          // Don't persist sensitive data
        })
      }
    ),
    { name: 'TechnicianStore' }
  )
);

export default useTechnicianStore;
```

#### 5.2.2 Employee Store

```javascript
// frontend/react-app/src/stores/employeeStore.js

import { create } from 'zustand';
import { devtools, persist } from 'zustand/middleware';

const useEmployeeStore = create(
  devtools(
    persist(
      (set, get) => ({
        // State
        dashboard: null,
        repairs: [],
        customers: [],
        devices: [],
        quotations: [],
        invoices: [],
        loading: false,
        error: null,

        // Actions
        setDashboard: (data) => set({ dashboard: data }),
        setRepairs: (repairs) => set({ repairs }),
        addRepair: (repair) => set((state) => ({
          repairs: [repair, ...state.repairs]
        })),
        updateRepair: (repairId, updates) => {
          const repairs = get().repairs.map(repair =>
            repair.id === repairId ? { ...repair, ...updates } : repair
          );
          set({ repairs });
        },
        setCustomers: (customers) => set({ customers }),
        setDevices: (devices) => set({ devices }),
        setLoading: (loading) => set({ loading }),
        setError: (error) => set({ error }),
        
        // Reset
        reset: () => set({
          dashboard: null,
          repairs: [],
          customers: [],
          devices: [],
          quotations: [],
          invoices: [],
          loading: false,
          error: null
        })
      }),
      {
        name: 'employee-store'
      }
    ),
    { name: 'EmployeeStore' }
  )
);

export default useEmployeeStore;
```

### 5.3 Custom Hooks

#### 5.3.1 useTechnician Hook

```javascript
// frontend/react-app/src/hooks/useTechnician.js

import { useEffect } from 'react';
import useTechnicianStore from '../stores/technicianStore';
import technicianService from '../services/technicianService';
import { useNotifications } from '../components/notifications/NotificationSystem';

export function useTechnician() {
  const store = useTechnicianStore();
  const notifications = useNotifications();

  // Load dashboard
  const loadDashboard = async () => {
    try {
      store.setLoading(true);
      const data = await technicianService.getDashboard();
      store.setDashboard(data);
    } catch (error) {
      store.setError(error);
      notifications.error('Ø®Ø·Ø£', { message: 'ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª' });
    } finally {
      store.setLoading(false);
    }
  };

  // Load jobs
  const loadJobs = async (filters = {}) => {
    try {
      store.setLoading(true);
      const data = await technicianService.getJobs(filters);
      store.setJobs(data);
    } catch (error) {
      store.setError(error);
      notifications.error('Ø®Ø·Ø£', { message: 'ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù‡Ø§Ù…' });
    } finally {
      store.setLoading(false);
    }
  };

  // Update job status
  const updateJobStatus = async (jobId, status, notes) => {
    try {
      await technicianService.updateJobStatus(jobId, status, notes);
      store.updateJob(jobId, { status });
      notifications.success('Ù†Ø¬Ø­', { message: 'ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­' });
    } catch (error) {
      store.setError(error);
      notifications.error('Ø®Ø·Ø£', { message: 'ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©' });
      throw error;
    }
  };

  // Update status
  const updateStatus = async (status) => {
    try {
      await technicianService.updateStatus(status);
      store.setStatus(status);
      notifications.success('Ù†Ø¬Ø­', { message: 'ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©' });
    } catch (error) {
      store.setError(error);
      notifications.error('Ø®Ø·Ø£', { message: 'ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©' });
    }
  };

  return {
    ...store,
    loadDashboard,
    loadJobs,
    updateJobStatus,
    updateStatus
  };
}
```

#### 5.3.2 useWebSocket Hook

```javascript
// frontend/react-app/src/hooks/useWebSocket.js

import { useEffect, useRef } from 'react';
import useAuthStore from '../stores/authStore';

export function useWebSocket(url, onMessage) {
  const wsRef = useRef(null);
  const user = useAuthStore((state) => state.user);

  useEffect(() => {
    if (!user) return;

    const ws = new WebSocket(`${url}?token=${user.token}`);
    wsRef.current = ws;

    ws.onopen = () => {
      console.log('WebSocket connected');
    };

    ws.onmessage = (event) => {
      const message = JSON.parse(event.data);
      onMessage(message);
    };

    ws.onerror = (error) => {
      console.error('WebSocket error:', error);
    };

    ws.onclose = () => {
      console.log('WebSocket disconnected');
      // Reconnect after 5 seconds
      setTimeout(() => {
        if (user) {
          // Reconnect logic
        }
      }, 5000);
    };

    return () => {
      if (wsRef.current) {
        wsRef.current.close();
      }
    };
  }, [user, url, onMessage]);

  const sendMessage = (event, data) => {
    if (wsRef.current && wsRef.current.readyState === WebSocket.OPEN) {
      wsRef.current.send(JSON.stringify({ event, data }));
    }
  };

  return { sendMessage };
}
```

### 5.4 Employee Portal Pages

#### 5.4.1 Employee Dashboard

```javascript
// frontend/react-app/src/pages/employee/EmployeeDashboard.js

import React, { useEffect } from 'react';
import { useNavigate } from 'react-router-dom';
import useEmployeeStore from '../../stores/employeeStore';
import EmployeeHeader from '../../components/employee/EmployeeHeader';
import QuickActionsPanel from '../../components/employee/QuickActionsPanel';
import { useEmployee } from '../../hooks/useEmployee';

export default function EmployeeDashboard() {
  const navigate = useNavigate();
  const { loadDashboard, dashboard, loading } = useEmployee();

  useEffect(() => {
    loadDashboard();
  }, []);

  if (loading) {
    return <LoadingSpinner />;
  }

  return (
    <div className="min-h-screen bg-gray-50">
      <EmployeeHeader />
      
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        {/* Welcome Section */}
        <div className="mb-8">
          <h1 className="text-2xl font-bold text-gray-900">
            Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ {dashboard?.user?.name} ğŸ‘‹
          </h1>
        </div>

        {/* Stats Cards */}
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
          {/* Stats cards */}
        </div>

        {/* Quick Actions */}
        <QuickActionsPanel />

        {/* Recent Activities */}
        <div>
          {/* Recent repairs, customers, etc. */}
        </div>
      </div>
    </div>
  );
}
```

---

## 6. Ø§Ù„ØªÙƒØ§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ù…ÙˆØ¯ÙŠÙˆÙ„Ø§Øª Ø§Ù„Ø£Ø®Ø±Ù‰

### 6.1 Repairs Module Integration

```javascript
// Integration points:
- Technician can view assigned repairs
- Technician can update repair status
- Technician can add notes to repairs
- Technician can request parts for repairs
- Employee can create new repairs
- Employee can assign technicians to repairs
- Employee can update repair information
```

### 6.2 Inventory Module Integration

```javascript
// Integration points:
- Technician can request spare parts
- Employee can check inventory availability
- Employee can issue parts for repairs
- Real-time inventory updates
- Low stock notifications
```

### 6.3 Finance Module Integration

```javascript
// Integration points:
- Employee can create quotations
- Employee can create invoices
- Employee can view payment status
- Technician can view repair costs
- Financial reports for technicians
```

### 6.4 Notifications Module Integration

```javascript
// Integration points:
- Real-time notifications for new assignments
- Notifications for parts request approval
- Notifications for status changes
- Notifications for important updates
- Email/SMS notifications
```

### 6.5 Reports Module Integration

```javascript
// Integration points:
- Technician performance reports
- Employee activity reports
- Time tracking reports
- Job completion reports
- Financial reports
```

---

## 7. Ø§Ù„Ø£Ù…Ø§Ù† ÙˆØ§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª

### 7.1 Permission Matrix

#### Technician Permissions:
```javascript
{
  'repairs.view_own': true,
  'repairs.update_own': true,
  'repairs.timeline_update': true,
  'repairs.parts_request': true,
  'repairs.media_upload': true,
  'profile.view_own': true,
  'profile.update_own': true,
  'time_tracking.clock_in': true,
  'time_tracking.clock_out': true,
  'reports.view_own': true
}
```

#### Employee Permissions:
```javascript
{
  'repairs.view': true,
  'repairs.create': true,
  'repairs.update': true,
  'repairs.assign': true,
  'customers.view': true,
  'customers.create': true,
  'customers.update': true,
  'devices.view': true,
  'devices.create': true,
  'devices.update': true,
  'quotations.create': true,
  'quotations.update': true,
  'invoices.create': true,
  'invoices.update': true,
  'profile.view_own': true,
  'profile.update_own': true,
  'time_tracking.clock_in': true,
  'time_tracking.clock_out': true,
  'reports.view': true
}
```

### 7.2 Security Best Practices

1. **Input Validation** - Validate all inputs
2. **SQL Injection Prevention** - Use prepared statements
3. **XSS Prevention** - Sanitize all outputs
4. **CSRF Protection** - Use CSRF tokens
5. **Rate Limiting** - Limit API requests
6. **File Upload Security** - Validate file types and sizes
7. **Password Policy** - Enforce strong passwords
8. **Session Management** - Secure session handling
9. **Audit Logging** - Log all important actions
10. **Error Handling** - Don't expose sensitive information

---

## 8. Ø®Ø·Ø© Ø§Ù„ØªÙ†ÙÙŠØ° (Production-Safe)

### Phase 1: Foundation (Week 1-2)
- [ ] Create database tables
- [ ] Set up Service Layer structure
- [ ] Set up Repository Pattern
- [ ] Create basic Employee Routes
- [ ] Set up authentication middleware
- [ ] Set up permission middleware

### Phase 2: Backend Core (Week 3-4)
- [ ] Implement Technician Service
- [ ] Implement Employee Service
- [ ] Implement Portal Service
- [ ] Implement Time Tracking Service
- [ ] Set up WebSocket service
- [ ] Implement file upload handler

### Phase 3: Frontend Core (Week 5-6)
- [ ] Set up State Management (Zustand)
- [ ] Create Employee Portal pages
- [ ] Enhance Technician Portal pages
- [ ] Create shared components
- [ ] Implement WebSocket client
- [ ] Set up error boundaries

### Phase 4: Integration (Week 7-8)
- [ ] Integrate with Repairs module
- [ ] Integrate with Inventory module
- [ ] Integrate with Finance module
- [ ] Integrate with Notifications module
- [ ] Integrate with Reports module

### Phase 5: Security & Testing (Week 9-10)
- [ ] Security audit
- [ ] Performance testing
- [ ] Load testing
- [ ] Security testing
- [ ] User acceptance testing

### Phase 6: Deployment (Week 11-12)
- [ ] Production deployment plan
- [ ] Database migration
- [ ] Feature flags
- [ ] Gradual rollout
- [ ] Monitoring setup
- [ ] Documentation

---

## 9. Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± ÙˆØ§Ù„Ø¬ÙˆØ¯Ø©

### 9.1 Unit Tests

```javascript
// Test files structure:
backend/tests/
â”œâ”€â”€ unit/
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ technicianService.test.js
â”‚   â”‚   â”œâ”€â”€ employeeService.test.js
â”‚   â”‚   â””â”€â”€ portalService.test.js
â”‚   â”œâ”€â”€ repositories/
â”‚   â”‚   â”œâ”€â”€ technicianRepository.test.js
â”‚   â”‚   â””â”€â”€ employeeRepository.test.js
â”‚   â””â”€â”€ middleware/
â”‚       â”œâ”€â”€ portalAuthMiddleware.test.js
â”‚       â””â”€â”€ portalPermissionMiddleware.test.js
```

### 9.2 Integration Tests

```javascript
// Test files structure:
backend/tests/
â”œâ”€â”€ integration/
â”‚   â”œâ”€â”€ technicianRoutes.test.js
â”‚   â”œâ”€â”€ employeeRoutes.test.js
â”‚   â””â”€â”€ portalRoutes.test.js
```

### 9.3 E2E Tests

```javascript
// Test files structure:
frontend/tests/
â”œâ”€â”€ e2e/
â”‚   â”œâ”€â”€ technicianPortal.test.js
â”‚   â”œâ”€â”€ employeePortal.test.js
â”‚   â””â”€â”€ portalIntegration.test.js
```

---

## 10. Ø§Ù„ØªÙˆØ«ÙŠÙ‚

### 10.1 API Documentation

- OpenAPI/Swagger specification
- Postman collection
- API usage examples

### 10.2 Frontend Documentation

- Component documentation
- Hook documentation
- Store documentation
- Usage examples

### 10.3 Deployment Documentation

- Deployment guide
- Environment variables
- Database migration guide
- Troubleshooting guide

---

## ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©

### Production Considerations:
1. **Feature Flags** - Use feature flags for gradual rollout
2. **Database Backups** - Ensure backups before migrations
3. **Monitoring** - Set up monitoring and alerts
4. **Logging** - Comprehensive logging for debugging
5. **Error Tracking** - Use error tracking service (Sentry)
6. **Performance Monitoring** - Monitor API response times
7. **User Feedback** - Collect user feedback during rollout

### Future Enhancements:
1. Mobile App (React Native)
2. Advanced Analytics
3. AI-powered recommendations
4. Voice commands
5. AR/VR support
6. Blockchain for audit trail

---

**Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«:** 2025-01-27  
**Ø§Ù„Ø¥ØµØ¯Ø§Ø±:** 1.0.0  
**Ø§Ù„Ø­Ø§Ù„Ø©:** Planning Phase


