    # ุชูุฑูุฑ ูุฑุงุฌุนุฉ QR Code ูู ุฅูุตุงู ุงูุงุณุชูุงู

## ๐ ููุฎุต ุงูุชูููุฐ

ุชู ูุฑุงุฌุนุฉ ูุธุงู QR Code ูู ุฅูุตุงู ุงูุงุณุชูุงู ูุทูุจุงุช ุงูุฅุตูุงุญ ูุชุทุจูู ุงูุชุญุณููุงุช ุงููุทููุจุฉ.

---

## โ ูุง ุชู ูุญุตู

### 1. **ุฅูุดุงุก trackingToken**
- โ ูุชู ุฅูุดุงุก `trackingToken` ุชููุงุฆูุงู ุนูุฏ ุฅูุดุงุก ุทูุจ ุฅุตูุงุญ ุฌุฏูุฏ
- โ ูุณุชุฎุฏู `crypto.randomBytes(24).toString('hex')` ูุฅูุดุงุก token ุขูู
- โ ูุชู ุญูุธู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู ุญูู `trackingToken`

**ุงููููุน**: `backend/routes/repairs.js` - ุงูุณุทุฑ 982

### 2. **ุฅูุดุงุก QR Code ูู ุฅูุตุงู ุงูุงุณุชูุงู**
- โ ูุชู ุฅูุดุงุก QR Code ุนูู ุงูุณูุฑูุฑ ุจุงุณุชุฎุฏุงู ููุชุจุฉ `qrcode`
- โ ุงูุฑุงุจุท ุงููุณุชุฎุฏู: `${frontendUrl}/track?trackingToken=${trackingToken}`
- โ ูุชู ุชุถููู QR Code ูู ุฅูุตุงู ุงูุงุณุชูุงู ุนูุฏ `settings.showQr !== false`

**ุงููููุน**: `backend/routes/repairs.js` - ุงูุณุทูุฑ 1919-1934

### 3. **ุตูุญุฉ ุงูุชุชุจุน ุงูุนุงูุฉ**
- โ ุตูุญุฉ `PublicRepairTrackingPage` ููุฌูุฏุฉ ูุชุนูู
- โ ุชุฏุนู ุงูุจุญุซ ุจู `trackingToken` ุฃู `requestNumber`
- โ๏ธ **ูุงูุช ุงููุดููุฉ**: ูุง ุชูุฑุฃ `trackingToken` ุชููุงุฆูุงู ูู URL ุนูุฏ ูุชุญ ุงูุฑุงุจุท ูุจุงุดุฑุฉ

---

## ๐ง ุงูุชุญุณููุงุช ุงููุทุจูุฉ

### 1. **ุฅุถุงูุฉ ูุฑุงุกุฉ ุชููุงุฆูุฉ ูู URL**
**ุงููุดููุฉ**: ุนูุฏ ูุชุญ ุฑุงุจุท QR Code ูุจุงุดุฑุฉ (`/track?trackingToken=xxx`)ุ ุงูุตูุญุฉ ูุง ุชูุฑุฃ ุงูู token ุชููุงุฆูุงู.

**ุงูุญู**: 
- ุฅุถุงูุฉ `useEffect` ููุฑุงุกุฉ `trackingToken` ูู query parameters
- ุงูุจุญุซ ุชููุงุฆูุงู ุนู ุงูุทูุจ ุนูุฏ ูุฌูุฏ token ูู URL
- ุงุณุชุฎุฏุงู `useSearchParams` ูู `react-router-dom`

**ุงูููู**: `frontend/react-app/src/pages/repairs/PublicRepairTrackingPage.js`

```javascript
// ูุฑุงุกุฉ trackingToken ูู URL query parameters ุนูุฏ ุชุญููู ุงูุตูุญุฉ
useEffect(() => {
  const tokenFromUrl = searchParams.get('trackingToken');
  if (tokenFromUrl) {
    setTrackingCode(tokenFromUrl);
    setSearchType('trackingToken');
    // ุงูุจุญุซ ุชููุงุฆูุงู ุนู ุงูุทูุจ
    handleAutoSearch(tokenFromUrl, 'trackingToken');
  }
}, [searchParams]);
```

### 2. **ุชุญุณูู ุฌูุฏุฉ QR Code**
**ุงูุชุญุณููุงุช**:
- ุฒูุงุฏุฉ ูุณุชูู ุชุตุญูุญ ุงูุฃุฎุทุงุก ูู `M` ุฅูู `H` (ุฃุนูู ูุณุชูู)
- ุฒูุงุฏุฉ ุงููุงูุด ูู `1` ุฅูู `2` ูุณูููุฉ ุงููุณุญ
- ุงุณุชุฎุฏุงู ุญุฌู ูุงุจู ููุชุฎุตูุต ูู `settings.qrSize` (ุงูุชุฑุงุถู 80 ุจูุณู)
- ุงูุญุฏ ุงูุฃุฏูู 60 ุจูุณู ูุงูุญุฏ ุงูุฃูุตู 150 ุจูุณู

**ุงูููู**: `backend/routes/repairs.js` - ุงูุณุทูุฑ 1919-1934

```javascript
qrCodeDataUrl = await QRCode.toDataURL(trackUrl, {
  width: Math.min(Math.max(qrSize, 60), 150), // ุจูู 60 ู 150 ุจูุณู
  margin: 2, // ุฒูุงุฏุฉ ุงููุงูุด ูุณูููุฉ ุงููุณุญ
  errorCorrectionLevel: 'H' // ูุณุชูู ุชุตุญูุญ ุฃุนูู
});
```

### 3. **ุชุญุณูู ุนุฑุถ QR Code ูู ุงูุฅูุตุงู**
**ุงูุชุญุณููุงุช**:
- ุฒูุงุฏุฉ padding ูู `4px` ุฅูู `6px`
- ุฒูุงุฏุฉ border ูู `1.5px` ุฅูู `2px`
- ุฅุถุงูุฉ box-shadow ูุชุญุณูู ุงููุธูุฑ
- ุชุญุณูู ุญุฌู ุงููุต ูุงูุชุจุงุนุฏ

**ุงูููู**: `backend/routes/repairs.js` - ุงูุณุทูุฑ 2217-2225

---

## ๐ ุงููุชุงุฆุฌ

### ูุจู ุงูุชุญุณููุงุช:
- โ QR Code ูุง ูุนูู ุชููุงุฆูุงู ุนูุฏ ูุชุญ ุงูุฑุงุจุท ูุจุงุดุฑุฉ
- โ๏ธ ุฌูุฏุฉ QR Code ูุชูุณุทุฉ (ูุณุชูู ุชุตุญูุญ `M`)
- โ๏ธ ุญุฌู ุซุงุจุช 60 ุจูุณู

### ุจุนุฏ ุงูุชุญุณููุงุช:
- โ QR Code ูุนูู ุชููุงุฆูุงู ุนูุฏ ูุชุญ ุงูุฑุงุจุท ูุจุงุดุฑุฉ
- โ ุฌูุฏุฉ ุฃุนูู (ูุณุชูู ุชุตุญูุญ `H`)
- โ ุญุฌู ูุงุจู ููุชุฎุตูุต (60-150 ุจูุณู)
- โ ูุธูุฑ ุฃูุถู ูุน shadow ูุญุฏูุฏ ุฃูุถุญ

---

## ๐งช ููููุฉ ุงูุงุฎุชุจุงุฑ

### 1. ุงุฎุชุจุงุฑ QR Code ูู ุฅูุตุงู ุงูุงุณุชูุงู:
1. ุงูุชุญ ุทูุจ ุฅุตูุงุญ
2. ุงุถุบุท ุนูู "ุทุจุงุนุฉ ุฅูุตุงู ุงูุงุณุชูุงู"
3. ุชุญูู ูู ูุฌูุฏ QR Code ูู ุงูุฅูุตุงู
4. ุงูุณุญ QR Code ุจูุงููุฑุง ุงููุงุชู
5. ูุฌุจ ุฃู ููุชุญ ุฑุงุจุท ุงูุชุชุจุน ุชููุงุฆูุงู ููุนุฑุถ ุจูุงูุงุช ุงูุทูุจ

### 2. ุงุฎุชุจุงุฑ ุงูุฑุงุจุท ุงููุจุงุดุฑ:
1. ุงูุชุญ ุฑุงุจุท ูุซู: `http://your-domain/track?trackingToken=xxxxx`
2. ูุฌุจ ุฃู ุชูุฑุฃ ุงูุตูุญุฉ ุงูู token ุชููุงุฆูุงู
3. ูุฌุจ ุฃู ุชุนุฑุถ ุจูุงูุงุช ุงูุทูุจ ุจุฏูู ุงูุญุงุฌุฉ ููุจุญุซ ูุฏููุงู

### 3. ุงุฎุชุจุงุฑ ุฌูุฏุฉ QR Code:
1. ุงุทุจุน ุฅูุตุงู ุงูุงุณุชูุงู
2. ุงูุณุญ QR Code ูู ุงููุณุฎุฉ ุงููุทุจูุนุฉ
3. ูุฌุจ ุฃู ูุนูู ุญุชู ูุน ุจุนุถ ุงูุชูู ุงูุจุณูุท (ุจูุถู ูุณุชูู ุงูุชุตุญูุญ `H`)

---

## ๐ ููุงุญุธุงุช ูููุฉ

### 1. **ูุชุบูุฑุงุช ุงูุจูุฆุฉ**
ุชุฃูุฏ ูู ุชุนููู `FRONTEND_URL` ุฃู `REACT_APP_FRONTEND_URL` ูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ:
```bash
FRONTEND_URL=https://your-domain.com
```

### 2. **ุฅุนุฏุงุฏุงุช ุงูุทุจุงุนุฉ**
ูููู ุชุฎุตูุต ุญุฌู QR Code ูู ุฅุนุฏุงุฏุงุช ุงูุทุจุงุนุฉ:
- `settings.qrSize`: ุญุฌู QR Code (ุงูุชุฑุงุถู: 80 ุจูุณู)
- `settings.showQr`: ุฅุธูุงุฑ/ุฅุฎูุงุก QR Code (ุงูุชุฑุงุถู: true)

### 3. **Route ุงูุชุชุจุน**
ููุฌุฏ routeุงู ููุชุชุจุน:
- `/track` - ุตูุญุฉ React (PublicRepairTrackingPage) - ูุณุชุฎุฏู query parameter
- `/api/repairs/track/:token` - ุตูุญุฉ HTML ูู Backend - ูุณุชุฎุฏู path parameter

QR Code ูุณุชุฎุฏู `/track?trackingToken=xxx` ููู ุงูุตุญูุญ ููุตูุญุฉ React.

---

## ๐ ุงูุชุญุฏูุซุงุช ุงููุณุชูุจููุฉ ุงูููุชุฑุญุฉ

1. **ุฅุถุงูุฉ ุฅุญุตุงุฆูุงุช ุงุณุชุฎุฏุงู QR Code**
   - ุชุชุจุน ุนุฏุฏ ูุฑุงุช ูุณุญ QR Code
   - ูุนุฑูุฉ ูู ุฃูู ูุฃุชู ุงููุณุชุฎุฏููู

2. **ุชุญุณูู ุตูุญุฉ ุงูุชุชุจุน**
   - ุฅุถุงูุฉ ุชุญุฏูุซ ุชููุงุฆู ููุญุงูุฉ
   - ุฅุดุนุงุฑุงุช ุนูุฏ ุชุบููุฑ ุงูุญุงูุฉ

3. **ุฏุนู QR Code ูููุงุชุณุงุจ**
   - ุฅุถุงูุฉ ุฑุงุจุท ูุงุชุณุงุจ ูุจุงุดุฑ ูู QR Code
   - ุฅุฑุณุงู ุฑุงุจุท ุงูุชุชุจุน ุนุจุฑ ูุงุชุณุงุจ

4. **ุชุญุณูู ุงูุฃูุงู**
   - ุฅุถุงูุฉ ุตูุงุญูุฉ ุฒูููุฉ ูู trackingToken
   - ุชุดููุฑ ุฅุถุงูู ููุจูุงูุงุช ุงูุญุณุงุณุฉ

---

## โ ุงูุฎูุงุตุฉ

ุชู ูุฑุงุฌุนุฉ ูุชุญุณูู ูุธุงู QR Code ูู ุฅูุตุงู ุงูุงุณุชูุงู ุจูุฌุงุญ. ุงููุธุงู ุงูุขู:
- โ ูุนูู ุจุดูู ุตุญูุญ
- โ ููุฑุฃ trackingToken ุชููุงุฆูุงู ูู URL
- โ ุฌูุฏุฉ ุฃุนูู ูุณูููุฉ ูุณุญ ุฃูุถู
- โ ูุงุจู ููุชุฎุตูุต ูู ุฅุนุฏุงุฏุงุช ุงูุทุจุงุนุฉ

**ุชุงุฑูุฎ ุงููุฑุงุฌุนุฉ**: 2025-01-27
**ุงูุญุงูุฉ**: โ ููุชูู ูุฌุงูุฒ ููุงุณุชุฎุฏุงู

