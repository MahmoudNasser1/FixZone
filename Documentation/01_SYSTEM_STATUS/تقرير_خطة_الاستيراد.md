# ๐ ุชูุฑูุฑ ุฎุทุฉ ุงุณุชูุฑุงุฏ ุงูุจูุงูุงุช ูู ุงููุธุงู ุงููุฏูู

## ๐ฏ ููุฎุต ุชูููุฐู

ุชู ุชุญููู ููู ุงููุธุงู ุงููุฏูู ุจูุฌุงุญ ูุฅุนุฏุงุฏ ุฎุทุฉ ุดุงููุฉ ูุงุณุชูุฑุงุฏ ุงูุนููุงุก ูุฅูุตุงูุงุช ุงูุงุณุชูุงู (ุทูุจุงุช ุงูุฅุตูุงุญ) ูุน ุงูุญูุงุธ ุนูู ุฌููุน ุงูุนูุงูุงุช.

---

## ๐ ููู ุงููุตุฏุฑ

```
๐ IN/FZ Data From Old System 2025-11-20_u539485933_maintain_dump.sql
๐ฆ ุงูุญุฌู: 1630 ุณุทุฑ
๐๏ธ ูุงุนุฏุฉ ุงูุจูุงูุงุช: u539485933_maintain
```

---

## ๐ ุฅุญุตุงุฆูุงุช ุงูุจูุงูุงุช ุงูููุชุดูุฉ

| ุงูุจูุงู | ุงูุนุฏุฏ |
|--------|------|
| **ุงูุนููุงุก (clients)** | **965 ุนููู** |
| **ุงูููุงุชูุฑ (invoices)** | **1,404 ูุงุชูุฑุฉ** |
| **ุฎุฏูุงุช ุงูููุงุชูุฑ (invoice_services)** | 1,854 ุฎุฏูุฉ |
| **ุญุงูุงุช ุงูููุงุชูุฑ (invoice_status)** | 1,870 ุญุงูุฉ |
| **ุงูููู ุงููุณุงุนุฏุฉ (lookups)** | 49 ูููุฉ |
| **ุงููุฑูุน (branches)** | 2 ูุฑุน |
| **ุงููุณุชุฎุฏููู (users)** | ~5-10 |

---

## ๐ฏ ุงูุฃูุฏุงู

### 1. ุงุณุชูุฑุงุฏ ุงูุนููุงุก โ
- **965 ุนููู** ูู ุฌุฏูู `clients`
- ุฑุจุท ุงูููุงูุน ูุงูุนูุงููู
- ุงูุญูุงุธ ุนูู ุฃุฑูุงู ุงูููุงุชู ูุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ

### 2. ุงุณุชูุฑุงุฏ ุทูุจุงุช ุงูุฅุตูุงุญ (Work Orders) ๐
- ุงุณุชุฎุฑุงุฌ ูู ุฌุฏูู `workorders`
- ุฅูุดุงุก ุณุฌูุงุช `Device` ููู ุทูุจ
- ุฅูุดุงุก ุณุฌูุงุช `RepairRequest` ูุน ุงูุฑุจุท ุงูุตุญูุญ

### 3. ุฑุจุท ุงูุนูุงูุงุช ๐
- ุฑุจุท ูู ุทูุจ ุฅุตูุงุญ ุจุงูุนููู ุงูููุงุณุจ
- ุฑุจุท ุงูุฃุฌูุฒุฉ ุจุงูุนููุงุก
- ุฑุจุท ุงูููุญูุงุช ูุงูุฎุฏูุงุช

---

## ๐๏ธ ุจููุฉ ุงููุธุงู ุงููุฏูู

### ุงูุฌุฏุงูู ุงูุฑุฆูุณูุฉ ุงูููุชุดูุฉ (42 ุฌุฏูู):

#### ๐ฆ ุฌุฏุงูู ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ:
- `clients` - ุงูุนููุงุก (965 ุณุฌู)
- `branches` - ุงููุฑูุน (2 ูุฑุน)
- `locations` - ุงูููุงูุน
- `users` - ุงููุณุชุฎุฏููู

#### ๐ ุฌุฏุงูู ุงูุฅุตูุงุญ ูุงูุฎุฏูุงุช:
- `workorders` - ุฃูุงูุฑ ุงูุนูู/ุฅูุตุงูุงุช ุงูุงุณุชูุงู
- `invoices` - ุงูููุงุชูุฑ (1,404 ูุงุชูุฑุฉ)
- `invoice_services` - ุฎุฏูุงุช ุงูููุงุชูุฑ
- `invoice_status` - ุญุงูุงุช ุงูููุงุชูุฑ

#### ๐ง ุฌุฏุงูู ูุณุงุนุฏุฉ:
- `lookups` - ุงูููู ุงููุณุงุนุฏุฉ (ุงููุงุฑูุงุชุ ุงูููุญูุงุชุ ุฅูุฎ) - 49 ูููุฉ
- `status` - ุงูุญุงูุงุช
- `types` - ุงูุฃููุงุน
- `departments` - ุงูุฃูุณุงู (4 ุฃูุณุงู)

---

## ๐ ุชุญููู ุฌุฏูู ุงูุนููุงุก

### ุจููุฉ ุฌุฏูู `clients`:
```sql
- id                 โ Customer.id (ุงููุธุงู ุงูุฌุฏูุฏ)
- name               โ Customer.name
- mobile             โ Customer.phone
- address            โ Customer.address  
- location_id        โ Customer.cityId (ุจุนุฏ ุฑุจุท Locations)
- balance            โ ูุนูููุงุช ูุงููุฉ (ุงุฎุชูุงุฑู)
- price_type         โ ููุน ุงูุณุนุฑ (ุงุฎุชูุงุฑู)
- created_at         โ Customer.createdAt
- updated_at         โ Customer.updatedAt
- deleted_at         โ Customer.deletedAt
```

---

## ๐ ุชุญููู ุทูุจุงุช ุงูุฅุตูุงุญ (Work Orders)

### ุจููุฉ ุฌุฏูู `workorders`:
```sql
- id                    โ ูุฑุฌุน ุฏุงุฎูู
- name                  โ ุงุณู ุงูุทูุจ
- client_id             โ RepairRequest.customerId
- device_type           โ Device.deviceType
- brand                 โ Device.brand
- device_model          โ Device.model
- device_sn             โ Device.serialNumber
- problem_description   โ RepairRequest.reportedProblem
- note                  โ RepairRequest.notes
- entery_at             โ RepairRequest.createdAt
- exit_at               โ ุชุงุฑูุฎ ุงูุชุณููู
- branche_id            โ RepairRequest.branchId
- creator_id            โ RepairRequest.technicianId
- problem_type          โ ููุน ุงููุดููุฉ
```

---

## ๐บ๏ธ ุฎุทุฉ ุงูุชูููุฐ (7 ูุฑุงุญู)

### **ุงููุฑุญูุฉ 1: ุชุญููู ูุชูุธูู ุงูุจูุงูุงุช** โก
**ุงููุฏุฉ:** 2-3 ุณุงุนุงุช
- โ ุชู: ุชุญููู ุงูุจููุฉ
- โณ ูุงุฏู: ุงุณุชุฎุฑุงุฌ ุนููุงุช ูู ุงูุจูุงูุงุช
- โณ ูุงุฏู: ุงูุชุญูู ูู ุฌูุฏุฉ ุงูุจูุงูุงุช

### **ุงููุฑุญูุฉ 2: ุฅุนุฏุงุฏ ุงูุจูุงูุงุช ุงููุณุงุนุฏุฉ** ๐ง
**ุงููุฏุฉ:** 1-2 ุณุงุนุงุช
- ุงุณุชูุฑุงุฏ Locations โ City
- ุงุณุชูุฑุงุฏ Lookups (brand, deviceType, accessories) โ VariableOption
- ุงูุชุญูู ูู Users ู Branches

### **ุงููุฑุญูุฉ 3: ุงุณุชูุฑุงุฏ ุงูุนููุงุก (965 ุนููู)** ๐ฅ
**ุงููุฏุฉ:** 1 ุณุงุนุฉ
- ุฅูุดุงุก ููู `customers_import.sql`
- ุงูุชุญูู ูู ุนุฏู ุงูุชูุฑุงุฑ (phone number)
- ุงูุญูุงุธ ุนูู ุงููุฑุฌุน ุงููุฏูู ูู `customFields`

### **ุงููุฑุญูุฉ 4: ุงุณุชูุฑุงุฏ ุงูุฃุฌูุฒุฉ** ๐ป
**ุงููุฏุฉ:** 2 ุณุงุนุงุช
- ุฅูุดุงุก Device ููู workorder
- ุฑุจุทู ุจุงูุนููู ุงููุณุชูุฑุฏ
- ุฑุจุทู ุจุงู brand ูู VariableOption

### **ุงููุฑุญูุฉ 5: ุงุณุชูุฑุงุฏ ุทูุจุงุช ุงูุฅุตูุงุญ** ๐
**ุงููุฏุฉ:** 2-3 ุณุงุนุงุช
- ุฅูุดุงุก RepairRequest ููู workorder
- ุฑุจุทู ุจุงูุนููู ูุงูุฌูุงุฒ
- ุชุญููู ุงูุญุงูุงุช (status mapping)
- ุฅูุดุงุก tracking token ูุฑูุฏ

### **ุงููุฑุญูุฉ 6: ุงุณุชูุฑุงุฏ ุงูููุญูุงุช ูุงูุฎุฏูุงุช** ๐
**ุงููุฏุฉ:** 1 ุณุงุนุฉ
- ุงุณุชุฎุฑุงุฌ accessories
- ุฑุจุท ุงูุฎุฏูุงุช ุจุทูุจุงุช ุงูุฅุตูุงุญ

### **ุงููุฑุญูุฉ 7: ุงูุงุฎุชุจุงุฑ ูุงูุชุญูู** โ
**ุงููุฏุฉ:** 2-3 ุณุงุนุงุช
- ุงูุชุญูู ูู ุนุฏุฏ ุงูุณุฌูุงุช ุงููุณุชูุฑุฏุฉ
- ุงูุชุญูู ูู ุงูุนูุงูุงุช (Foreign Keys)
- ุงุฎุชุจุงุฑ ุนููุฉ ูู ุงูุจูุงูุงุช ูู ุงููุงุฌูุฉ
- ุฅูุดุงุก ุชูุฑูุฑ ููุงุฆู

**โฑ๏ธ ุงููุฏุฉ ุงูุฅุฌูุงููุฉ ุงููุชููุนุฉ: 11-15 ุณุงุนุฉ ุนูู**

---

## ๐ ุงููููุงุช ุงูุชู ุณูุชู ุฅูุดุงุคูุง

```
backend/scripts/migration/
โโโ DATA_IMPORT_PLAN.md               โ ุชู ุฅูุดุงุคู
โโโ 1_extract_old_data.js             โณ ูุงุฏู
โโโ 2_transform_data.js               โณ ูุงุฏู
โโโ 3_import_locations.sql            โณ ูุงุฏู
โโโ 4_import_lookups.sql              โณ ูุงุฏู
โโโ 5_import_customers.sql            โณ ูุงุฏู
โโโ 6_import_devices.sql              โณ ูุงุฏู
โโโ 7_import_repairs.sql              โณ ูุงุฏู
โโโ 8_import_accessories.sql          โณ ูุงุฏู
โโโ 9_verify_import.js                โณ ูุงุฏู
```

---

## โ๏ธ ููุงุท ูููุฉ ููุงูุชุจุงู

### 1. **ุงูุงุญุชูุงุธ ุจุงููุฑุงุฌุน:**
- ุณูุชู ุญูุธ `old_system_id` ูู `customFields` ููู ุณุฌู
- ูููู ุงุณุชุฎุฏุงูู ููุฑุจุท ุงููุณุชูุจูู ุฃู ุงูุชุฏููู

### 2. **ุงูุชุนุงูู ูุน ุงูุจูุงูุงุช ุงููุญุฐููุฉ:**
- ุงูุณุฌูุงุช ุงูุชู `deleted_at IS NOT NULL` ุณุชุชู ูุนุงูุฌุชูุง ุจุดูู ูููุตู
- ุฎูุงุฑ ุฅูุง ุชุฌุงูููุง ุฃู ุงุณุชูุฑุงุฏูุง ูุน ูุถุน ุนูุงูุฉ ูุญุฐููุฉ

### 3. **ุชุฑููู ุงูุชุชุจุน:**
- ุฅูุดุงุก `tracking_token` ุฌุฏูุฏ ููู RepairRequest
- ุญูุธ ุฑูู ุงูุทูุจ ุงููุฏูู ูู `customFields`

### 4. **ุชุญููู ุงูุญุงูุงุช:**
ุงููุธุงู ุงููุฏูู โ ุงููุธุงู ุงูุฌุฏูุฏ:
- `status 1` โ `RECEIVED`
- `status 2` โ `INSPECTION`
- `status 3` โ `AWAITING_APPROVAL`
- `status 4` โ `UNDER_REPAIR`
- `status 5` โ `READY_FOR_DELIVERY`
- `status 6` โ `DELIVERED`
- `status 7` โ `REJECTED`
- `status 8` โ `WAITING_PARTS`

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

### ุงูุขู:
1. โ ุชุญููู ุงูุจููุฉ - **ููุชูู**
2. โ ุฅูุดุงุก ุฎุทุฉ ุงูุงุณุชูุฑุงุฏ - **ููุชูู**

### ูุฑูุจุงู:
3. โณ ุงุณุชุฎุฑุงุฌ ุนููุงุช ูู ุงูุจูุงูุงุช
4. โณ ุฅูุดุงุก ุณูุฑูุจุชุงุช ุงูุชุญููู
5. โณ ุงูุงุฎุชุจุงุฑ ุนูู ุนููุฉ ุตุบูุฑุฉ
6. โณ ุงูุชูููุฐ ุงููุงูู ููุงุณุชูุฑุงุฏ

---

## ๐ ุงููุณุชูุฏุงุช ุงููุฑุฌุนูุฉ

### ูููุงุช ุงูุชูุซูู:
- `backend/scripts/migration/DATA_IMPORT_PLAN.md` - ุงูุฎุทุฉ ุงูุชูุตูููุฉ
- `backend/scripts/migration/README.md` - ุงูุฏููู ุงูุนุงู
- `backend/scripts/migration/QUICK_START.md` - ุงูุจุฏุงูุฉ ุงูุณุฑูุนุฉ
- `backend/scripts/migration/ุฅุฑุดุงุฏุงุช_ุงูุงุณุชูุฑุงุฏ.md` - ุงูุฅุฑุดุงุฏุงุช ุจุงูุนุฑุจูุฉ

### ุงููููู ุงูุฌุฏูุฏ:
- `migrations/01_COMPLETE_SCHEMA.sql` - Schema ุงููุงูู ูููุธุงู ุงูุฌุฏูุฏ

---

## ๐ก ููุงุญุธุงุช ุชูููุฉ

### ุฌุฏุงูู ุงููุธุงู ุงูุฌุฏูุฏ ุงููุณุชูุฏูุฉ:
1. **Customer** - ูุงุณุชูุฑุงุฏ ุงูุนููุงุก
2. **Device** - ูุชุฎุฒูู ูุนูููุงุช ุงูุฃุฌูุฒุฉ
3. **RepairRequest** - ูุทูุจุงุช ุงูุฅุตูุงุญ
4. **RepairRequestAccessory** - ููููุญูุงุช
5. **VariableOption** - ูููุงุฑูุงุช ูุงูุฃููุงุน

### ุงูุนูุงูุงุช:
```
Customer (1) โโ (N) Device
Device (1) โโ (N) RepairRequest
Customer (1) โโ (N) RepairRequest
RepairRequest (1) โโ (N) RepairRequestAccessory
```

---

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดููุฉ ุฃุซูุงุก ุงูุงุณุชูุฑุงุฏ:
1. ุฑุงุฌุน ููู ุงูุฎุทุฉ ุงูุชูุตูููุฉ
2. ุชุญูู ูู ูููุงุช ุงูุณุฌูุงุช (logs)
3. ุงุณุชุฎุฏู ุณูุฑูุจุช ุงูุชุญูู ุจุนุฏ ูู ูุฑุญูุฉ

---

**๐ ุชุงุฑูุฎ ุงูุชูุฑูุฑ:** 21 ููููุจุฑ 2025  
**๐ค ุงูููุนูุฏ:** ูุธุงู FixZone - ูุณุงุนุฏ ุงูุฐูุงุก ุงูุงุตุทูุงุนู  
**๐ ุงูุญุงูุฉ:** ๐ก ุฌุงูุฒ ููุชูููุฐ

