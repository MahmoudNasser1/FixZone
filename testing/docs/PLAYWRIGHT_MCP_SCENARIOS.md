# سيناريوهات اختبار End-to-End باستخدام Playwright MCP

> هذه قائمة سيناريوهات قابلة للتنفيذ عبر MCP لتغطي التدفق الكامل للنظام على `http://localhost:3000`، مع Backend على `http://localhost:3001`.

## إعداد أساسي
- افتح `http://localhost:3000/login`
- أدخل: admin@fixzone.com / password
- أكد التوجيه إلى `/`

## السيناريو 1: تدفق إصلاح كامل (استلام → إصلاح → فاتورة → دفع → تقارير)
1) إنشاء عميل جديد من صفحة العملاء (إن وجد)
2) إنشاء طلب إصلاح جديد من `/repairs/new`
3) الانتقال إلى تفاصيل الطلب وتغيير الحالة إلى `in-progress`
4) إضافة خدمة + قطع غيار
5) إنشاء فاتورة من الطلب
6) معالجة دفعة جزئية من InvoiceDetails
7) التحقق من Daily Report باحتساب الدفعة
8) فتح Workflow Dashboard والتأكد من إحصائيات التقدم

## السيناريو 2: حركة مخزون وتنبيهات
1) فتح `/inventory/stock-movements` وتطبيق فلاتر حسب النوع والتاريخ
2) فتح `/inventory/stock-alerts` ومراجعة التبويبات (التنبيهات/الاقتراحات/الإعدادات)
3) تعديل إعداد حد أدنى لقطعة والتأكد من ظهور/اختفاء التنبيه

## السيناريو 3: الموردون وطلبات الشراء
1) فتح صفحة الموردين وإضافة مورد
2) إنشاء طلب شراء وربطه بالمورد
3) استلام الطلب وتأكيد زيادة المخزون

## السيناريو 4: التقارير المتقدمة
1) فتح `/reports/daily` والتحقق من البطاقات والمخططات
2) فتح `/reports/financial` ومراجعة الأرباح والخسائر
3) فتح `/reports/technician` ومراجعة أداء الفنيين

## السيناريو 5: الإعدادات المتقدمة
1) فتح `/settings/advanced`
2) تعديل إعدادات ضمن تبويب الأداء/الإشعارات
3) حفظ التغييرات، ثم إعادة تحميل الصفحة والتأكد من الاسترجاع
4) تجربة التصدير/الاستيراد JSON

## السيناريو 6: إدارة المستخدمين والأدوار
1) فتح `/settings/users`
2) إضافة مستخدم جديد بدور محدد
3) تعديل كلمة المرور لمستخدم
4) حذف/تعطيل مستخدم
5) جلب قائمة الأدوار والتأكد من عدم وجود أعمدة غير معرّفة

## السيناريو 7: الإشعارات الذكية
1) فتح `/notifications/smart`
2) توليد إشعار، وضع علامة كمقروء
3) التأكد من تسجيل التاريخ والحالة

## السيناريو 8: تتبع الإصلاح
1) فتح `/repairs/tracking`
2) عرض timeline لطلب محدد
3) التأكد من ترتيب الأحداث ووضوح الحالة

## ملاحظات تنفيذ MCP
- استخدم التحديد بالأسماء الظاهرة على الأزرار والروابط العربية (Role-based selectors)
- انتظر العناصر الديناميكية (loading → visible)
- تحقق من عدم وجود أخطاء Console خطيرة (TypeError/Unhandled Promise)
- التزم بقواعد الـ RTL أثناء التفاعل (القوائم المنسدلة، التبويبات)
