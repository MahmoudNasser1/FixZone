# ๐ ุฎุทุฉ ุงูุชุญูู ูู ูุธุงู ุงูุตูุงุญูุงุช
## Permissions System Verification Plan

**ุงูุชุงุฑูุฎ:** 2025-11-15  
**ุงููููุฏุณ:** Auto (Cursor AI)  
**ุงูุญุงูุฉ:** ๐ **ุฎุทุฉ ุงูุชุญูู**

---

## ๐ฏ ุงููุฏู

ุงูุชุญูู ูู ุฃู ูุธุงู ุงูุตูุงุญูุงุช ูุนูู ุจุดูู ุตุญูุญ ููุทุจู ุงูุตูุงุญูุงุช ุงููุฎุชุงุฑุฉ ููุท.

---

## ๐ ุงูุงุฎุชุจุงุฑุงุช ุงููุทููุจุฉ

### โ Test 1: Admin Permissions

#### Steps:
1. ุชุณุฌูู ุงูุฏุฎูู ูู Admin (roleId = 1)
2. ูุญุงููุฉ ุงููุตูู ุฅูู:
   - โ `/admin/roles` - ูุฌุจ ุฃู ูุนูู
   - โ `/users` - ูุฌุจ ุฃู ูุนูู
   - โ `/settings` - ูุฌุจ ุฃู ูุนูู
   - โ `/` - ูุฌุจ ุฃู ูุนูู (Main Dashboard)

#### Expected Results:
- โ Admin ูุฏูู ูู ุงูุตูุงุญูุงุช
- โ ููููู ุงููุตูู ุฅูู ุฌููุน Routes
- โ Sidebar ูุธูุฑ ูู ุงูุฑูุงุจุท

---

### โ Test 2: Customer Permissions

#### Steps:
1. ุชุณุฌูู ุงูุฏุฎูู ูู Customer (roleId = 8)
2. ูุญุงููุฉ ุงููุตูู ุฅูู:
   - โ `/customer/dashboard` - ูุฌุจ ุฃู ูุนูู
   - โ `/` - ูุฌุจ ุฃู ูุชู ุงูุชูุฌูู ุฅูู `/customer/dashboard`
   - โ `/admin/roles` - ูุฌุจ ุฃู ูุชู ุงูุชูุฌูู ุฅูู `/customer/dashboard`
   - โ `/users` - ูุฌุจ ุฃู ูุชู ุงูุชูุฌูู ุฅูู `/customer/dashboard`
   - โ `/settings` - ูุฌุจ ุฃู ูุชู ุงูุชูุฌูู ุฅูู `/customer/dashboard`
   - โ `/tech/*` - ูุฌุจ ุฃู ูุชู ุงูุชูุฌูู ุฅูู `/customer/dashboard`

#### Expected Results:
- โ Customer ููููู ุงููุตูู ููุท ุฅูู `/customer/*`
- โ Sidebar ูุฎูู ููุนููุงุก
- โ ูุชู ุชูุฌููู ุชููุงุฆูุงู ูู ุฃู route ุฅุฏุงุฑู

---

### โ Test 3: Technician Permissions (Future)

#### Steps:
1. ุชุณุฌูู ุงูุฏุฎูู ูู Technician (roleId = 3)
2. ูุญุงููุฉ ุงููุตูู ุฅูู:
   - โ `/tech/dashboard` - ูุฌุจ ุฃู ูุนูู (ุจุนุฏ ุงูุชูููุฐ)
   - โ `/tech/jobs` - ูุฌุจ ุฃู ูุนูู (ุจุนุฏ ุงูุชูููุฐ)
   - โ `/repairs/:id` - ูุฌุจ ุฃู ูุนูู (ุงูุฎุงุต ุจู ููุท)
   - โ `/admin/roles` - ูุฌุจ ุฃู ูุชู ุงูุชูุฌูู ุฅูู `/tech/dashboard`
   - โ `/users` - ูุฌุจ ุฃู ูุชู ุงูุชูุฌูู ุฅูู `/tech/dashboard`
   - โ `/customer/*` - ูุฌุจ ุฃู ูุชู ุงูุชูุฌูู ุฅูู `/tech/dashboard`

#### Expected Results:
- โ Technician ููููู ุงููุตูู ููุท ุฅูู `/tech/*` ู `/repairs` (ุฎุงุตุฉ ุจู)
- โ Sidebar ูุธูุฑ ุฑูุงุจุท ุงูููู ููุท
- โ ูุชู ุชูุฌููู ุชููุงุฆูุงู ูู ุฃู route ุบูุฑ ูุตุฑุญ ุจู

---

### โ Test 4: Permission Middleware

#### Steps:
1. ุงุฎุชุจุงุฑ `checkPermission(permission)`:
   - โ `repairs.view` - ูุฌุจ ุฃู ูุณูุญ ููููู
   - โ `users.manage` - ูุฌุจ ุฃู ูุฑูุถ ููููู
   - โ `repairs.view_own` - ูุฌุจ ุฃู ูุณูุญ ููุนููู

2. ุงุฎุชุจุงุฑ `checkAnyPermission([permissions])`:
   - โ `['repairs.view', 'repairs.create']` - ุฅุฐุง ูุงู ูุฏูู ูุงุญุฏ ุนูู ุงูุฃูู
   - โ `['users.manage', 'admin.roles']` - ุฅุฐุง ูู ููู ูุฏูู ุฃู ูููุง

3. ุงุฎุชุจุงุฑ `checkAllPermissions([permissions])`:
   - โ `['repairs.view', 'repairs.update']` - ุฅุฐุง ูุงู ูุฏูู ูููุง
   - โ `['repairs.view', 'users.manage']` - ุฅุฐุง ูุงู ูุฏูู ุจุนุถูุง ููุท

4. ุงุฎุชุจุงุฑ Wildcard Permissions:
   - โ `repairs.*` - ูุฌุจ ุฃู ูุณูุญ ูุฌููุน permissions ูู repairs module

5. ุงุฎุชุจุงุฑ Permission Inheritance:
   - โ ุฅุฐุง ูุงู Parent Role ูุฏูู `repairs.view`
   - โ ูุฌุจ ุฃู ูุฑุซ Child Role ููุณ ุงูุตูุงุญูุฉ

---

### โ Test 5: Backend API Permissions

#### Steps:
1. ุงุฎุชุจุงุฑ APIs ูุน permissions:
   - โ `GET /api/repairs` - ูุฌุจ ุฃู ูุณูุญ ููููู
   - โ `PUT /api/users/:id` - ูุฌุจ ุฃู ูุฑูุถ ููููู (Admin only)
   - โ `GET /api/auth/customer/profile` - ูุฌุจ ุฃู ูุณูุญ ููุนููู ููุท
   - โ `GET /api/users` - ูุฌุจ ุฃู ูุฑูุถ ููุนููู (Admin only)

#### Expected Results:
- โ APIs ุชุชุญูู ูู ุงูุตูุงุญูุงุช ุจุดูู ุตุญูุญ
- โ ุชุนูุฏ 403 Forbidden ููุตูุงุญูุงุช ุบูุฑ ุงููุตุฑุญ ุจูุง
- โ ุชุนูุฏ ุจูุงูุงุช ุตุญูุญุฉ ููุตูุงุญูุงุช ุงููุตุฑุญ ุจูุง

---

## ๐งช ููููุฉ ุงูุงุฎุชุจุงุฑ

### Method 1: Manual Testing
1. ุชุณุฌูู ุงูุฏุฎูู ุจุญุณุงุจุงุช ูุฎุชููุฉ
2. ูุญุงููุฉ ุงููุตูู ุฅูู routes ูุฎุชููุฉ
3. ุงูุชุญูู ูู ุงูุชูุฌููุงุช ูุงูุตูุงุญูุงุช

### Method 2: Automated Testing (MCP)
1. ุงุณุชุฎุฏุงู Chrome DevTools MCP
2. ุชุณุฌูู ุงูุฏุฎูู ุจุฑูุฌูุงู
3. ูุญุงููุฉ ุงููุตูู ุฅูู routes
4. ุงูุชุญูู ูู ุงูุชูุฌููุงุช

### Method 3: Unit Tests
1. ุงุฎุชุจุงุฑ PermissionMiddleware
2. ุงุฎุชุจุงุฑ AuthorizeMiddleware
3. ุงุฎุชุจุงุฑ Route Protection

---

## ๐ ุฌุฏูู ุงูุงุฎุชุจุงุฑุงุช

| Test ID | Description | Status | Notes |
|---------|-------------|--------|-------|
| T1 | Admin Permissions | โ | ูุนูู ุจุดูู ุตุญูุญ |
| T2 | Customer Permissions | โ | ูุนูู ุจุดูู ุตุญูุญ |
| T3 | Technician Permissions | โณ | ุจุนุฏ ุชูููุฐ Technician Portal |
| T4 | Permission Middleware | ๐ | ูุญุชุงุฌ ุฅูู ุงุฎุชุจุงุฑ ููุตู |
| T5 | Backend API Permissions | ๐ | ูุญุชุงุฌ ุฅูู ุงุฎุชุจุงุฑ ููุตู |

---

## โ ุงูุฎูุงุตุฉ

### ูุง ุชู ุงูุชุญูู ููู:
- โ Admin ูุฏูู ูู ุงูุตูุงุญูุงุช
- โ Customer ูุญูู ูู ุงููุตูู ุฅูู routes ุฅุฏุงุฑูุฉ
- โ Route Protection ูุนูู ุจุดูู ุตุญูุญ
- โ Permission Middleware ููุฌูุฏ ููุทุจู

### ูุง ูุญุชุงุฌ ุฅูู ูุฒูุฏ ูู ุงูุงุฎุชุจุงุฑ:
- โณ Permission Middleware ุนูู routes ูุญุฏุฏุฉ
- โณ API permissions ุนูู endpoints ูุญุฏุฏุฉ
- โณ Technician permissions (ุจุนุฏ ุงูุชูููุฐ)

---

**ุงูุญุงูุฉ:** ๐ **ููุฏ ุงูุงุฎุชุจุงุฑ**

