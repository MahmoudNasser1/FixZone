<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reports - Fix Zone ERP</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  <div class="container my-5">
    <h1>Reports</h1>
    <h2 class="mt-4">Summary</h2>
    <div class="row g-4" id="summaryCards">
      <!-- Cards will be inserted here -->
    </div>
    <h2 class="mt-5">Inventory Report</h2>
    <table class="table table-bordered" id="inventoryReportTable">
      <thead>
        <tr>
          <th>ID</th>
          <th>SKU</th>
          <th>Name</th>
          <th>Type</th>
          <th>Purchase Price</th>
          <th>Selling Price</th>
          <th>Serial Number</th>
          <th>Warehouse ID</th>
          <th>Quantity</th>
          <th>Min Level</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    function fetchSummary() {
      fetch('/api/reports/summary')
        .then(res => res.json())
        .then(data => {
          const cards = [
            { title: 'Devices Received', value: data.devicesReceived, color: 'primary' },
            { title: 'Under Repair', value: data.underRepair, color: 'warning' },
            { title: 'Delivered', value: data.delivered, color: 'success' },
            { title: 'Overdue Devices', value: data.overdueDevices, color: 'danger' },
            { title: 'Low Stock Items', value: data.lowStockItems, color: 'secondary' }
          ];
          document.getElementById('summaryCards').innerHTML = cards.map(card => `
            <div class="col-md-4">
              <div class="card text-bg-${card.color}">
                <div class="card-body">
                  <h5 class="card-title">${card.title}</h5>
                  <p class="card-text display-6">${card.value}</p>
                </div>
              </div>
            </div>
          `).join('');
        });
    }
    function fetchInventoryReport() {
      fetch('/api/reports/inventory')
        .then(res => res.json())
        .then(data => {
          const tbody = document.querySelector('#inventoryReportTable tbody');
          tbody.innerHTML = '';
          data.forEach(i => {
            tbody.innerHTML += `
              <tr>
                <td>${i.id}</td>
                <td>${i.sku}</td>
                <td>${i.name}</td>
                <td>${i.type}</td>
                <td>${i.purchasePrice}</td>
                <td>${i.sellingPrice}</td>
                <td>${i.serialNumber || ''}</td>
                <td>${i.warehouseId || ''}</td>
                <td>${i.quantity || ''}</td>
                <td>${i.minLevel || ''}</td>
              </tr>
            `;
          });
        });
    }
    fetchSummary();
    fetchInventoryReport();
  </script>
</body>
</html> 